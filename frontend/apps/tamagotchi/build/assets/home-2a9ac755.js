import{c as _n,g as Ut,m as le,u as Ie,a as Ue,r as c,j as x,b as Oe,S as ee,n as Rr,d as Bn,R as Y,e as Hn,f as ut,h as Tr,i as Yt,k as Gt,l as Cr,o as jr,L as Fr,p as Nr,I as Ir,q as Mr,s as Ar,t as Dr}from"./index-ea528c4e.js";var Wn={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(_n,function(){var n=1e3,r=6e4,o=36e5,s="millisecond",i="second",l="minute",a="hour",u="day",f="week",d="month",h="quarter",p="year",m="date",v="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,b=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(S){var E=["th","st","nd","rd"],w=S%100;return"["+S+(E[(w-20)%10]||E[w]||E[0])+"]"}},T=function(S,E,w){var I=String(S);return!I||I.length>=E?S:""+Array(E+1-I.length).join(w)+S},R={s:T,z:function(S){var E=-S.utcOffset(),w=Math.abs(E),I=Math.floor(w/60),O=w%60;return(E<=0?"+":"-")+T(I,2,"0")+":"+T(O,2,"0")},m:function S(E,w){if(E.date()<w.date())return-S(w,E);var I=12*(w.year()-E.year())+(w.month()-E.month()),O=E.clone().add(I,d),k=w-O<0,L=E.clone().add(I+(k?-1:1),d);return+(-(I+(w-O)/(k?O-L:L-O))||0)},a:function(S){return S<0?Math.ceil(S)||0:Math.floor(S)},p:function(S){return{M:d,y:p,w:f,d:u,D:m,h:a,m:l,s:i,ms:s,Q:h}[S]||String(S||"").toLowerCase().replace(/s$/,"")},u:function(S){return S===void 0}},P="en",A={};A[P]=g;var M=function(S){return S instanceof F},D=function S(E,w,I){var O;if(!E)return P;if(typeof E=="string"){var k=E.toLowerCase();A[k]&&(O=k),w&&(A[k]=w,O=k);var L=E.split("-");if(!O&&L.length>1)return S(L[0])}else{var B=E.name;A[B]=E,O=B}return!I&&O&&(P=O),O||!I&&P},j=function(S,E){if(M(S))return S.clone();var w=typeof E=="object"?E:{};return w.date=S,w.args=arguments,new F(w)},$=R;$.l=D,$.i=M,$.w=function(S,E){return j(S,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var F=function(){function S(w){this.$L=D(w.locale,null,!0),this.parse(w)}var E=S.prototype;return E.parse=function(w){this.$d=function(I){var O=I.date,k=I.utc;if(O===null)return new Date(NaN);if($.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var L=O.match(y);if(L){var B=L[2]-1||0,H=(L[7]||"0").substring(0,3);return k?new Date(Date.UTC(L[1],B,L[3]||1,L[4]||0,L[5]||0,L[6]||0,H)):new Date(L[1],B,L[3]||1,L[4]||0,L[5]||0,L[6]||0,H)}}return new Date(O)}(w),this.$x=w.x||{},this.init()},E.init=function(){var w=this.$d;this.$y=w.getFullYear(),this.$M=w.getMonth(),this.$D=w.getDate(),this.$W=w.getDay(),this.$H=w.getHours(),this.$m=w.getMinutes(),this.$s=w.getSeconds(),this.$ms=w.getMilliseconds()},E.$utils=function(){return $},E.isValid=function(){return this.$d.toString()!==v},E.isSame=function(w,I){var O=j(w);return this.startOf(I)<=O&&O<=this.endOf(I)},E.isAfter=function(w,I){return j(w)<this.startOf(I)},E.isBefore=function(w,I){return this.endOf(I)<j(w)},E.$g=function(w,I,O){return $.u(w)?this[I]:this.set(O,w)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(w,I){var O=this,k=!!$.u(I)||I,L=$.p(w),B=function(fe,q){var J=$.w(O.$u?Date.UTC(O.$y,q,fe):new Date(O.$y,q,fe),O);return k?J:J.endOf(u)},H=function(fe,q){return $.w(O.toDate()[fe].apply(O.toDate("s"),(k?[0,0,0,0]:[23,59,59,999]).slice(q)),O)},G=this.$W,Q=this.$M,C=this.$D,_="set"+(this.$u?"UTC":"");switch(L){case p:return k?B(1,0):B(31,11);case d:return k?B(1,Q):B(0,Q+1);case f:var W=this.$locale().weekStart||0,Z=(G<W?G+7:G)-W;return B(k?C-Z:C+(6-Z),Q);case u:case m:return H(_+"Hours",0);case a:return H(_+"Minutes",1);case l:return H(_+"Seconds",2);case i:return H(_+"Milliseconds",3);default:return this.clone()}},E.endOf=function(w){return this.startOf(w,!1)},E.$set=function(w,I){var O,k=$.p(w),L="set"+(this.$u?"UTC":""),B=(O={},O[u]=L+"Date",O[m]=L+"Date",O[d]=L+"Month",O[p]=L+"FullYear",O[a]=L+"Hours",O[l]=L+"Minutes",O[i]=L+"Seconds",O[s]=L+"Milliseconds",O)[k],H=k===u?this.$D+(I-this.$W):I;if(k===d||k===p){var G=this.clone().set(m,1);G.$d[B](H),G.init(),this.$d=G.set(m,Math.min(this.$D,G.daysInMonth())).$d}else B&&this.$d[B](H);return this.init(),this},E.set=function(w,I){return this.clone().$set(w,I)},E.get=function(w){return this[$.p(w)]()},E.add=function(w,I){var O,k=this;w=Number(w);var L=$.p(I),B=function(Q){var C=j(k);return $.w(C.date(C.date()+Math.round(Q*w)),k)};if(L===d)return this.set(d,this.$M+w);if(L===p)return this.set(p,this.$y+w);if(L===u)return B(1);if(L===f)return B(7);var H=(O={},O[l]=r,O[a]=o,O[i]=n,O)[L]||1,G=this.$d.getTime()+w*H;return $.w(G,this)},E.subtract=function(w,I){return this.add(-1*w,I)},E.format=function(w){var I=this,O=this.$locale();if(!this.isValid())return O.invalidDate||v;var k=w||"YYYY-MM-DDTHH:mm:ssZ",L=$.z(this),B=this.$H,H=this.$m,G=this.$M,Q=O.weekdays,C=O.months,_=function(q,J,Ot,Xe){return q&&(q[J]||q(I,k))||Ot[J].slice(0,Xe)},W=function(q){return $.s(B%12||12,q,"0")},Z=O.meridiem||function(q,J,Ot){var Xe=q<12?"AM":"PM";return Ot?Xe.toLowerCase():Xe},fe={YY:String(this.$y).slice(-2),YYYY:this.$y,M:G+1,MM:$.s(G+1,2,"0"),MMM:_(O.monthsShort,G,C,3),MMMM:_(C,G),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:_(O.weekdaysMin,this.$W,Q,2),ddd:_(O.weekdaysShort,this.$W,Q,3),dddd:Q[this.$W],H:String(B),HH:$.s(B,2,"0"),h:W(1),hh:W(2),a:Z(B,H,!0),A:Z(B,H,!1),m:String(H),mm:$.s(H,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:L};return k.replace(b,function(q,J){return J||fe[q]||L.replace(":","")})},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(w,I,O){var k,L=$.p(I),B=j(w),H=(B.utcOffset()-this.utcOffset())*r,G=this-B,Q=$.m(this,B);return Q=(k={},k[p]=Q/12,k[d]=Q,k[h]=Q/3,k[f]=(G-H)/6048e5,k[u]=(G-H)/864e5,k[a]=G/o,k[l]=G/r,k[i]=G/n,k)[L]||G,O?Q:$.a(Q)},E.daysInMonth=function(){return this.endOf(d).$D},E.$locale=function(){return A[this.$L]},E.locale=function(w,I){if(!w)return this.$L;var O=this.clone(),k=D(w,I,!0);return k&&(O.$L=k),O},E.clone=function(){return $.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},S}(),N=F.prototype;return j.prototype=N,[["$ms",s],["$s",i],["$m",l],["$H",a],["$W",u],["$M",d],["$y",p],["$D",m]].forEach(function(S){N[S[1]]=function(E){return this.$g(E,S[0],S[1])}}),j.extend=function(S,E){return S.$i||(S(E,F,j),S.$i=!0),j},j.locale=D,j.isDayjs=M,j.unix=function(S){return j(1e3*S)},j.en=A[P],j.Ls=A,j.p={},j})})(Wn);var kr=Wn.exports;const nt=Ut(kr);var Vn={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(_n,function(){return function(n,r,o){n=n||{};var s=r.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l(u,f,d,h){return s.fromToBase(u,f,d,h)}o.en.relativeTime=i,s.fromToBase=function(u,f,d,h,p){for(var m,v,y,b=d.$locale().relativeTime||i,g=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],T=g.length,R=0;R<T;R+=1){var P=g[R];P.d&&(m=h?o(u).diff(d,P.d,!0):d.diff(u,P.d,!0));var A=(n.rounding||Math.round)(Math.abs(m));if(y=m>0,A<=P.r||!P.r){A<=1&&R>0&&(P=g[R-1]);var M=b[P.l];p&&(A=p(""+A)),v=typeof M=="string"?M.replace("%d",A):M(A,f,P.l,y);break}}if(f)return v;var D=y?b.future:b.past;return typeof D=="function"?D(v):D.replace("%s",v)},s.to=function(u,f){return l(u,f,this,!0)},s.from=function(u,f){return l(u,f,this)};var a=function(u){return u.$u?o.utc():o()};s.toNow=function(u){return this.to(a(this),u)},s.fromNow=function(u){return this.from(a(this),u)}}})})(Vn);var Lr=Vn.exports;const _r=Ut(Lr),Br=e=>(nt.extend(_r),nt(+le(e)).fromNow(!0)),Hr=e=>{const t=nt().diff(nt(+le(e)),"minutes");return t>60?"old":t>20?"adult":"baby"},Wr=({className:e,emotion:t="happy",age:n="baby",isDead:r,hasItem:o=[],color:s,isActive:i,isWinner:l,energy:a,inBattle:u})=>{const{lesson:f}=Ie(),{tamagotchi:d,tamagotchiItems:h}=Ue(),[p,m]=c.useState(!!r),[v,y]=c.useState(t),[b,g]=c.useState(0),[T,R]=c.useState(o),P=c.useRef({isReady:!1,energy:0}),[A,M]=c.useState(n);c.useEffect(()=>{d&&M(Hr(d.dateOfBirth))},[d]),c.useEffect(()=>{h.length>0&&!u?R(h):R(o)},[h]),c.useEffect(()=>{a&&!i?P.current.isReady?P.current.energy!==a&&(g(Math.round((a-P.current.energy)/100)),P.current.energy=a):(P.current.isReady=!0,P.current.energy=a):g(0)},[a,i]),c.useEffect(()=>{d&&m(d.isDead)},[d]),c.useEffect(()=>{if(d&&f){const{fed:L,entertained:B,rested:H}=d;Number(f.step)>1&&!u&&y(p?"scared":l?"hello":4e3>Math.min.apply(null,[+le(L),+le(H),+le(B)])?"crying":6e3>Math.min.apply(null,[+le(L),+le(H),+le(B)])?"angry":t)}},[p,t,l,f,d]);const D="tamagotchi",j="absolute inset-0 w-full h-full",$=r||p,F=$?"scared":l?"hello":v,N=A==="baby"?"face-baby":`mouse-${A}-${F==="hello"?"happy":F}`,S=`head-${A}`,E=`eye-${F==="hello"?"happy":F}`,w=`hands-${T!=null&&T.includes("sword")?"sword":F==="hello"?"hello":F==="angry"?"angry":"normal"}`,I=`tail-${T!=null&&T.includes("sword")?"sword":F==="hello"?"hello":"normal"}`,O=T!=null&&T.includes("glasses")?"head-glasses":A==="old"?"face-old-glasses":null,k=`body-${$?"dead":"normal"}`;return x.jsxs("div",{className:Oe("relative text-[#1852FF]",e??"grow w-full h-30 aspect-square"),children:[!$&&x.jsx(ee,{name:I,section:D,className:j}),!$&&x.jsx(ee,{name:w,section:D,className:j}),x.jsx(ee,{name:k,section:D,className:j}),(T==null?void 0:T.includes("bag"))&&x.jsx(ee,{name:"body-bag",section:D,className:j}),x.jsx(ee,{name:S,section:D,className:j}),x.jsx(ee,{name:N,section:D,className:j}),x.jsx(ee,{name:E,section:D,className:j}),F==="crying"&&x.jsx(ee,{name:"tears",section:D,className:j}),!$&&O&&x.jsx(ee,{name:O,section:D,className:j}),!$&&(T==null?void 0:T.includes("hat"))&&x.jsx(ee,{name:"head-hat",section:D,className:j}),!$&&(i||l)&&x.jsx("div",{className:"absolute top-full -z-1 left-1/2 -translate-x-1/2",children:x.jsx("div",{className:Oe("animate-pulse opacity-70 blur-2xl w-64 h-40",i&&"bg-white",l&&"bg-primary")})}),!!b&&x.jsxs("div",{className:"absolute top-1/4 right-15 w-12 h-12 grid place-items-center",children:[x.jsx(ee,{name:"damage",section:D,className:"absolute inset-0 w-full h-full"}),x.jsx("span",{className:"relative z-1 text-white font-bold",children:b})]})]})},Vr=()=>{const{api:e,isApiReady:t}=Rr(),[n,r]=c.useState({}),[o,s]=c.useState(),{lesson:i,lessonMeta:l}=Ie(),{tamagotchi:a}=Ue();return c.useEffect(()=>{if(a){if(a.isDead)s(void 0);else if(Object.keys(n).length){const u=Object.entries(n).filter(f=>!!f[1]).sort(([,f],[,d])=>+f-+d)[0];s(u?u[0]:void 0)}}},[n,a]),c.useEffect(()=>{if(!t)return;let u;return l&&(i==null?void 0:i.step)===5&&a&&(a.isDead||(u=e.gearEvents.subscribeToGearEvent("UserMessageSent",({data:f})=>{const{message:{payload:d}}=f,h=l.createType(l.types.handle.output,d).toHuman();if(a&&["WantToSleep","PlayWithMe","FeedMe"].includes(h)){const p=Bn(h,a);r(m=>({...m,...p}))}}))),()=>{u&&u.then(f=>f())}},[t,i,l,a]),{notification:n,setNotification:r,activeNotification:o,setActiveNotification:s}};var Ur=Object.defineProperty,Yr=(e,t,n)=>t in e?Ur(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rt=(e,t,n)=>(Yr(e,typeof t!="symbol"?t+"":t,n),n);let Gr=class{constructor(){Rt(this,"current",this.detect()),Rt(this,"handoffState","pending"),Rt(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},pe=new Gr,ne=(e,t)=>{pe.isServer?c.useEffect(e,t):c.useLayoutEffect(e,t)};function ue(e){let t=c.useRef(e);return ne(()=>{t.current=e},[e]),t}function Un(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function we(){let e=[],t={addEventListener(n,r,o,s){return n.addEventListener(r,o,s),t.add(()=>n.removeEventListener(r,o,s))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Un(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,o){let s=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:o}),this.add(()=>{Object.assign(n.style,{[r]:s})})},group(n){let r=we();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let o of e.splice(r,1))o()}},dispose(){for(let n of e.splice(0))n()}};return t}function ft(){let[e]=c.useState(we);return c.useEffect(()=>()=>e.dispose(),[e]),e}let V=function(e){let t=ue(e);return Y.useCallback((...n)=>t.current(...n),[t])};function dt(){let[e,t]=c.useState(pe.isHandoffComplete);return e&&pe.isHandoffComplete===!1&&t(!1),c.useEffect(()=>{e!==!0&&t(!0)},[e]),c.useEffect(()=>pe.handoff(),[]),e}var fn;let be=(fn=Y.useId)!=null?fn:function(){let e=dt(),[t,n]=Y.useState(e?()=>pe.nextId():null);return ne(()=>{t===null&&n(pe.nextId())},[t]),t!=null?""+t:void 0};function X(e,t,...n){if(e in t){let o=t[e];return typeof o=="function"?o(...n):o}let r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,X),r}function Ye(e){return pe.isServer?null:e instanceof Node?e.ownerDocument:e!=null&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}let At=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ae=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(ae||{}),rt=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(rt||{}),qr=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(qr||{});function Ge(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(At)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var pt=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(pt||{});function mt(e,t=0){var n;return e===((n=Ye(e))==null?void 0:n.body)?!1:X(t,{0(){return e.matches(At)},1(){let r=e;for(;r!==null;){if(r.matches(At))return!0;r=r.parentElement}return!1}})}function Yn(e){let t=Ye(e);we().nextFrame(()=>{t&&!mt(t.activeElement,0)&&zr(e)})}function zr(e){e==null||e.focus({preventScroll:!0})}let Xr=["textarea","input"].join(",");function Kr(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Xr))!=null?n:!1}function Gn(e,t=n=>n){return e.slice().sort((n,r)=>{let o=t(n),s=t(r);if(o===null||s===null)return 0;let i=o.compareDocumentPosition(s);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function Qr(e,t){return Pe(Ge(),t,{relativeTo:e})}function Pe(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:o=[]}={}){let s=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,i=Array.isArray(e)?n?Gn(e):e:Ge(e);o.length>0&&i.length>1&&(i=i.filter(p=>!o.includes(p))),r=r??s.activeElement;let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,i.indexOf(r))-1;if(t&4)return Math.max(0,i.indexOf(r))+1;if(t&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},f=0,d=i.length,h;do{if(f>=d||f+d<=0)return 0;let p=a+f;if(t&16)p=(p+d)%d;else{if(p<0)return 3;if(p>=d)return 1}h=i[p],h==null||h.focus(u),f+=l}while(h!==s.activeElement);return t&6&&Kr(h)&&h.select(),h.hasAttribute("tabindex")||h.setAttribute("tabindex","0"),2}function Tt(e,t,n){let r=ue(t);c.useEffect(()=>{function o(s){r.current(s)}return document.addEventListener(e,o,n),()=>document.removeEventListener(e,o,n)},[e,n])}function qn(e,t,n=!0){let r=c.useRef(!1);c.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function o(i,l){if(!r.current||i.defaultPrevented)return;let a=function f(d){return typeof d=="function"?f(d()):Array.isArray(d)||d instanceof Set?d:[d]}(e),u=l(i);if(u!==null&&u.getRootNode().contains(u)){for(let f of a){if(f===null)continue;let d=f instanceof HTMLElement?f:f.current;if(d!=null&&d.contains(u)||i.composed&&i.composedPath().includes(d))return}return!mt(u,pt.Loose)&&u.tabIndex!==-1&&i.preventDefault(),t(i,u)}}let s=c.useRef(null);Tt("mousedown",i=>{var l,a;r.current&&(s.current=((a=(l=i.composedPath)==null?void 0:l.call(i))==null?void 0:a[0])||i.target)},!0),Tt("click",i=>{s.current&&(o(i,()=>s.current),s.current=null)},!0),Tt("blur",i=>o(i,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function dn(e){var t;if(e.type)return e.type;let n=(t=e.as)!=null?t:"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function zn(e,t){let[n,r]=c.useState(()=>dn(e));return ne(()=>{r(dn(e))},[e.type,e.as]),ne(()=>{n||t.current&&t.current instanceof HTMLButtonElement&&!t.current.hasAttribute("type")&&r("button")},[n,t]),n}let Xn=Symbol();function Kn(e,t=!0){return Object.assign(e,{[Xn]:t})}function re(...e){let t=c.useRef(e);c.useEffect(()=>{t.current=e},[e]);let n=V(r=>{for(let o of t.current)o!=null&&(typeof o=="function"?o(r):o.current=r)});return e.every(r=>r==null||(r==null?void 0:r[Xn]))?void 0:n}function Zr({container:e,accept:t,walk:n,enabled:r=!0}){let o=c.useRef(t),s=c.useRef(n);c.useEffect(()=>{o.current=t,s.current=n},[t,n]),ne(()=>{if(!e||!r)return;let i=Ye(e);if(!i)return;let l=o.current,a=s.current,u=Object.assign(d=>l(d),{acceptNode:l}),f=i.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,u,!1);for(;f.nextNode();)a(f.currentNode)},[e,r,o,s])}function Jr(e){throw new Error("Unexpected object: "+e)}var ce=(e=>(e[e.First=0]="First",e[e.Previous=1]="Previous",e[e.Next=2]="Next",e[e.Last=3]="Last",e[e.Specific=4]="Specific",e[e.Nothing=5]="Nothing",e))(ce||{});function eo(e,t){let n=t.resolveItems();if(n.length<=0)return null;let r=t.resolveActiveIndex(),o=r??-1,s=(()=>{switch(e.focus){case 0:return n.findIndex(i=>!t.resolveDisabled(i));case 1:{let i=n.slice().reverse().findIndex((l,a,u)=>o!==-1&&u.length-a-1>=o?!1:!t.resolveDisabled(l));return i===-1?i:n.length-1-i}case 2:return n.findIndex((i,l)=>l<=o?!1:!t.resolveDisabled(i));case 3:{let i=n.slice().reverse().findIndex(l=>!t.resolveDisabled(l));return i===-1?i:n.length-1-i}case 4:return n.findIndex(i=>t.resolveId(i)===e.id);case 5:return null;default:Jr(e)}})();return s===-1?r:s}function Qn(...e){return e.filter(Boolean).join(" ")}var Re=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(Re||{}),ge=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(ge||{});function oe({ourProps:e,theirProps:t,slot:n,defaultTag:r,features:o,visible:s=!0,name:i}){let l=Zn(t,e);if(s)return Ke(l,n,r,i);let a=o??0;if(a&2){let{static:u=!1,...f}=l;if(u)return Ke(f,n,r,i)}if(a&1){let{unmount:u=!0,...f}=l;return X(u?0:1,{0(){return null},1(){return Ke({...f,hidden:!0,style:{display:"none"}},n,r,i)}})}return Ke(l,n,r,i)}function Ke(e,t={},n,r){var o;let{as:s=n,children:i,refName:l="ref",...a}=Ct(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},f=typeof i=="function"?i(t):i;"className"in a&&a.className&&typeof a.className=="function"&&(a.className=a.className(t));let d={};if(t){let h=!1,p=[];for(let[m,v]of Object.entries(t))typeof v=="boolean"&&(h=!0),v===!0&&p.push(m);h&&(d["data-headlessui-state"]=p.join(" "))}if(s===c.Fragment&&Object.keys(pn(a)).length>0){if(!c.isValidElement(f)||Array.isArray(f)&&f.length>1)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(a).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`));let h=Qn((o=f.props)==null?void 0:o.className,a.className),p=h?{className:h}:{};return c.cloneElement(f,Object.assign({},Zn(f.props,pn(Ct(a,["ref"]))),d,u,to(f.ref,u.ref),p))}return c.createElement(s,Object.assign({},Ct(a,["ref"]),s!==c.Fragment&&u,s!==c.Fragment&&d),f)}function to(...e){return{ref:e.every(t=>t==null)?void 0:t=>{for(let n of e)n!=null&&(typeof n=="function"?n(t):n.current=t)}}}function Zn(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},n={};for(let r of e)for(let o in r)o.startsWith("on")&&typeof r[o]=="function"?(n[o]!=null||(n[o]=[]),n[o].push(r[o])):t[o]=r[o];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(t,{[r](o,...s){let i=n[r];for(let l of i){if((o instanceof Event||(o==null?void 0:o.nativeEvent)instanceof Event)&&o.defaultPrevented)return;l(o,...s)}}});return t}function te(e){var t;return Object.assign(c.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function pn(e){let t=Object.assign({},e);for(let n in t)t[n]===void 0&&delete t[n];return t}function Ct(e,t=[]){let n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}function qt(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=(t==null?void 0:t.getAttribute("disabled"))==="";return r&&no(n)?!1:r}function no(e){if(!e)return!1;let t=e.previousElementSibling;for(;t!==null;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}let ro="div";var ot=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ot||{});function oo(e,t){let{features:n=1,...r}=e,o={ref:t,"aria-hidden":(n&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return oe({ourProps:o,theirProps:r,slot:{},defaultTag:ro,name:"Hidden"})}let Dt=te(oo),zt=c.createContext(null);zt.displayName="OpenClosedContext";var K=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(K||{});function qe(){return c.useContext(zt)}function Xt({value:e,children:t}){return Y.createElement(zt.Provider,{value:e},t)}var z=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(z||{});function mn(e){return[e.screenX,e.screenY]}function io(){let e=c.useRef([-1,-1]);return{wasMoved(t){let n=mn(t);return e.current[0]===n[0]&&e.current[1]===n[1]?!1:(e.current=n,!0)},update(t){e.current=mn(t)}}}function so(e,t,n){let r=ue(t);c.useEffect(()=>{function o(s){r.current(s)}return window.addEventListener(e,o,n),()=>window.removeEventListener(e,o,n)},[e,n])}var ye=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(ye||{});function Jn(){let e=c.useRef(0);return so("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function er(){let e=c.useRef(!1);return ne(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function _e(...e){return c.useMemo(()=>Ye(...e),[...e])}function lo(e,t,n,r){let o=ue(n);c.useEffect(()=>{e=e??window;function s(i){o.current(i)}return e.addEventListener(t,s,r),()=>e.removeEventListener(t,s,r)},[e,t,r])}let ao=c.createContext(!1);function co(){return c.useContext(ao)}function uo(e){let t=co(),n=c.useContext(tr),r=_e(e),[o,s]=c.useState(()=>{if(!t&&n!==null||pe.isServer)return null;let i=r==null?void 0:r.getElementById("headlessui-portal-root");if(i)return i;if(r===null)return null;let l=r.createElement("div");return l.setAttribute("id","headlessui-portal-root"),r.body.appendChild(l)});return c.useEffect(()=>{o!==null&&(r!=null&&r.body.contains(o)||r==null||r.body.appendChild(o))},[o,r]),c.useEffect(()=>{t||n!==null&&s(n.current)},[n,s,t]),o}let fo=c.Fragment;function po(e,t){let n=e,r=c.useRef(null),o=re(Kn(f=>{r.current=f}),t),s=_e(r),i=uo(r),[l]=c.useState(()=>{var f;return pe.isServer?null:(f=s==null?void 0:s.createElement("div"))!=null?f:null}),a=dt(),u=c.useRef(!1);return ne(()=>{if(u.current=!1,!(!i||!l))return i.contains(l)||(l.setAttribute("data-headlessui-portal",""),i.appendChild(l)),()=>{u.current=!0,Un(()=>{var f;u.current&&(!i||!l||(l instanceof Node&&i.contains(l)&&i.removeChild(l),i.childNodes.length<=0&&((f=i.parentElement)==null||f.removeChild(i))))})}},[i,l]),a?!i||!l?null:Hn.createPortal(oe({ourProps:{ref:o},theirProps:n,defaultTag:fo,name:"Portal"}),l):null}let mo=c.Fragment,tr=c.createContext(null);function ho(e,t){let{target:n,...r}=e,o={ref:re(t)};return Y.createElement(tr.Provider,{value:n},oe({ourProps:o,theirProps:r,defaultTag:mo,name:"Popover.Group"}))}let vo=te(po),go=te(ho),yo=Object.assign(vo,{Group:go});var bo=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(bo||{}),wo=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(wo||{}),xo=(e=>(e[e.OpenMenu=0]="OpenMenu",e[e.CloseMenu=1]="CloseMenu",e[e.GoToItem=2]="GoToItem",e[e.Search=3]="Search",e[e.ClearSearch=4]="ClearSearch",e[e.RegisterItem=5]="RegisterItem",e[e.UnregisterItem=6]="UnregisterItem",e))(xo||{});function jt(e,t=n=>n){let n=e.activeItemIndex!==null?e.items[e.activeItemIndex]:null,r=Gn(t(e.items.slice()),s=>s.dataRef.current.domRef.current),o=n?r.indexOf(n):null;return o===-1&&(o=null),{items:r,activeItemIndex:o}}let Eo={1(e){return e.menuState===1?e:{...e,activeItemIndex:null,menuState:1}},0(e){return e.menuState===0?e:{...e,menuState:0}},2:(e,t)=>{var n;let r=jt(e),o=eo(t,{resolveItems:()=>r.items,resolveActiveIndex:()=>r.activeItemIndex,resolveId:s=>s.id,resolveDisabled:s=>s.dataRef.current.disabled});return{...e,...r,searchQuery:"",activeItemIndex:o,activationTrigger:(n=t.trigger)!=null?n:1}},3:(e,t)=>{let n=e.searchQuery!==""?0:1,r=e.searchQuery+t.value.toLowerCase(),o=(e.activeItemIndex!==null?e.items.slice(e.activeItemIndex+n).concat(e.items.slice(0,e.activeItemIndex+n)):e.items).find(i=>{var l;return((l=i.dataRef.current.textValue)==null?void 0:l.startsWith(r))&&!i.dataRef.current.disabled}),s=o?e.items.indexOf(o):-1;return s===-1||s===e.activeItemIndex?{...e,searchQuery:r}:{...e,searchQuery:r,activeItemIndex:s,activationTrigger:1}},4(e){return e.searchQuery===""?e:{...e,searchQuery:"",searchActiveItemIndex:null}},5:(e,t)=>{let n=jt(e,r=>[...r,{id:t.id,dataRef:t.dataRef}]);return{...e,...n}},6:(e,t)=>{let n=jt(e,r=>{let o=r.findIndex(s=>s.id===t.id);return o!==-1&&r.splice(o,1),r});return{...e,...n,activationTrigger:1}}},Kt=c.createContext(null);Kt.displayName="MenuContext";function ht(e){let t=c.useContext(Kt);if(t===null){let n=new Error(`<${e} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ht),n}return t}function So(e,t){return X(t.type,Eo,e,t)}let Po=c.Fragment;function $o(e,t){let n=c.useReducer(So,{menuState:1,buttonRef:c.createRef(),itemsRef:c.createRef(),items:[],searchQuery:"",activeItemIndex:null,activationTrigger:1}),[{menuState:r,itemsRef:o,buttonRef:s},i]=n,l=re(t);qn([s,o],(h,p)=>{var m;i({type:1}),mt(p,pt.Loose)||(h.preventDefault(),(m=s.current)==null||m.focus())},r===0);let a=V(()=>{i({type:1})}),u=c.useMemo(()=>({open:r===0,close:a}),[r,a]),f=e,d={ref:l};return Y.createElement(Kt.Provider,{value:n},Y.createElement(Xt,{value:X(r,{0:K.Open,1:K.Closed})},oe({ourProps:d,theirProps:f,slot:u,defaultTag:Po,name:"Menu"})))}let Oo="button";function Ro(e,t){var n;let r=be(),{id:o=`headlessui-menu-button-${r}`,...s}=e,[i,l]=ht("Menu.Button"),a=re(i.buttonRef,t),u=ft(),f=V(v=>{switch(v.key){case z.Space:case z.Enter:case z.ArrowDown:v.preventDefault(),v.stopPropagation(),l({type:0}),u.nextFrame(()=>l({type:2,focus:ce.First}));break;case z.ArrowUp:v.preventDefault(),v.stopPropagation(),l({type:0}),u.nextFrame(()=>l({type:2,focus:ce.Last}));break}}),d=V(v=>{switch(v.key){case z.Space:v.preventDefault();break}}),h=V(v=>{if(qt(v.currentTarget))return v.preventDefault();e.disabled||(i.menuState===0?(l({type:1}),u.nextFrame(()=>{var y;return(y=i.buttonRef.current)==null?void 0:y.focus({preventScroll:!0})})):(v.preventDefault(),l({type:0})))}),p=c.useMemo(()=>({open:i.menuState===0}),[i]),m={ref:a,id:o,type:zn(e,i.buttonRef),"aria-haspopup":"menu","aria-controls":(n=i.itemsRef.current)==null?void 0:n.id,"aria-expanded":e.disabled?void 0:i.menuState===0,onKeyDown:f,onKeyUp:d,onClick:h};return oe({ourProps:m,theirProps:s,slot:p,defaultTag:Oo,name:"Menu.Button"})}let To="div",Co=Re.RenderStrategy|Re.Static;function jo(e,t){var n,r;let o=be(),{id:s=`headlessui-menu-items-${o}`,...i}=e,[l,a]=ht("Menu.Items"),u=re(l.itemsRef,t),f=_e(l.itemsRef),d=ft(),h=qe(),p=(()=>h!==null?(h&K.Open)===K.Open:l.menuState===0)();c.useEffect(()=>{let g=l.itemsRef.current;g&&l.menuState===0&&g!==(f==null?void 0:f.activeElement)&&g.focus({preventScroll:!0})},[l.menuState,l.itemsRef,f]),Zr({container:l.itemsRef.current,enabled:l.menuState===0,accept(g){return g.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:g.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(g){g.setAttribute("role","none")}});let m=V(g=>{var T,R;switch(d.dispose(),g.key){case z.Space:if(l.searchQuery!=="")return g.preventDefault(),g.stopPropagation(),a({type:3,value:g.key});case z.Enter:if(g.preventDefault(),g.stopPropagation(),a({type:1}),l.activeItemIndex!==null){let{dataRef:P}=l.items[l.activeItemIndex];(R=(T=P.current)==null?void 0:T.domRef.current)==null||R.click()}Yn(l.buttonRef.current);break;case z.ArrowDown:return g.preventDefault(),g.stopPropagation(),a({type:2,focus:ce.Next});case z.ArrowUp:return g.preventDefault(),g.stopPropagation(),a({type:2,focus:ce.Previous});case z.Home:case z.PageUp:return g.preventDefault(),g.stopPropagation(),a({type:2,focus:ce.First});case z.End:case z.PageDown:return g.preventDefault(),g.stopPropagation(),a({type:2,focus:ce.Last});case z.Escape:g.preventDefault(),g.stopPropagation(),a({type:1}),we().nextFrame(()=>{var P;return(P=l.buttonRef.current)==null?void 0:P.focus({preventScroll:!0})});break;case z.Tab:g.preventDefault(),g.stopPropagation(),a({type:1}),we().nextFrame(()=>{Qr(l.buttonRef.current,g.shiftKey?ae.Previous:ae.Next)});break;default:g.key.length===1&&(a({type:3,value:g.key}),d.setTimeout(()=>a({type:4}),350));break}}),v=V(g=>{switch(g.key){case z.Space:g.preventDefault();break}}),y=c.useMemo(()=>({open:l.menuState===0}),[l]),b={"aria-activedescendant":l.activeItemIndex===null||(n=l.items[l.activeItemIndex])==null?void 0:n.id,"aria-labelledby":(r=l.buttonRef.current)==null?void 0:r.id,id:s,onKeyDown:m,onKeyUp:v,role:"menu",tabIndex:0,ref:u};return oe({ourProps:b,theirProps:i,slot:y,defaultTag:To,features:Co,visible:p,name:"Menu.Items"})}let Fo=c.Fragment;function No(e,t){let n=be(),{id:r=`headlessui-menu-item-${n}`,disabled:o=!1,...s}=e,[i,l]=ht("Menu.Item"),a=i.activeItemIndex!==null?i.items[i.activeItemIndex].id===r:!1,u=c.useRef(null),f=re(t,u);ne(()=>{if(i.menuState!==0||!a||i.activationTrigger===0)return;let R=we();return R.requestAnimationFrame(()=>{var P,A;(A=(P=u.current)==null?void 0:P.scrollIntoView)==null||A.call(P,{block:"nearest"})}),R.dispose},[u,a,i.menuState,i.activationTrigger,i.activeItemIndex]);let d=c.useRef({disabled:o,domRef:u});ne(()=>{d.current.disabled=o},[d,o]),ne(()=>{var R,P;d.current.textValue=(P=(R=u.current)==null?void 0:R.textContent)==null?void 0:P.toLowerCase()},[d,u]),ne(()=>(l({type:5,id:r,dataRef:d}),()=>l({type:6,id:r})),[d,r]);let h=V(()=>{l({type:1})}),p=V(R=>{if(o)return R.preventDefault();l({type:1}),Yn(i.buttonRef.current)}),m=V(()=>{if(o)return l({type:2,focus:ce.Nothing});l({type:2,focus:ce.Specific,id:r})}),v=io(),y=V(R=>v.update(R)),b=V(R=>{v.wasMoved(R)&&(o||a||l({type:2,focus:ce.Specific,id:r,trigger:0}))}),g=V(R=>{v.wasMoved(R)&&(o||a&&l({type:2,focus:ce.Nothing}))}),T=c.useMemo(()=>({active:a,disabled:o,close:h}),[a,o,h]);return oe({ourProps:{id:r,ref:f,role:"menuitem",tabIndex:o===!0?void 0:-1,"aria-disabled":o===!0?!0:void 0,disabled:void 0,onClick:p,onFocus:m,onPointerEnter:y,onMouseEnter:y,onPointerMove:b,onMouseMove:b,onPointerLeave:g,onMouseLeave:g},theirProps:s,slot:T,defaultTag:Fo,name:"Menu.Item"})}let Io=te($o),Mo=te(Ro),Ao=te(jo),Do=te(No),Qe=Object.assign(Io,{Button:Mo,Items:Ao,Item:Do});var ko=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(ko||{}),Lo=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(Lo||{});let _o={0:e=>({...e,popoverState:X(e.popoverState,{0:1,1:0})}),1(e){return e.popoverState===1?e:{...e,popoverState:1}},2(e,t){return e.button===t.button?e:{...e,button:t.button}},3(e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},4(e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},5(e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},Qt=c.createContext(null);Qt.displayName="PopoverContext";function vt(e){let t=c.useContext(Qt);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,vt),n}return t}let Zt=c.createContext(null);Zt.displayName="PopoverAPIContext";function Jt(e){let t=c.useContext(Zt);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Jt),n}return t}let en=c.createContext(null);en.displayName="PopoverGroupContext";function nr(){return c.useContext(en)}let gt=c.createContext(null);gt.displayName="PopoverPanelContext";function Bo(){return c.useContext(gt)}function Ho(e,t){return X(t.type,_o,e,t)}let Wo="div";function Vo(e,t){var n;let r=c.useRef(null),o=re(t,Kn(N=>{r.current=N})),s=c.useRef([]),i=c.useReducer(Ho,{popoverState:1,buttons:s,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:c.createRef(),afterPanelSentinel:c.createRef()}),[{popoverState:l,button:a,buttonId:u,panel:f,panelId:d,beforePanelSentinel:h,afterPanelSentinel:p},m]=i,v=_e((n=r.current)!=null?n:a),y=c.useMemo(()=>{if(!a||!f)return!1;for(let k of document.querySelectorAll("body > *"))if(Number(k==null?void 0:k.contains(a))^Number(k==null?void 0:k.contains(f)))return!0;let N=Ge(),S=N.indexOf(a),E=(S+N.length-1)%N.length,w=(S+1)%N.length,I=N[E],O=N[w];return!f.contains(I)&&!f.contains(O)},[a,f]),b=ue(u),g=ue(d),T=c.useMemo(()=>({buttonId:b,panelId:g,close:()=>m({type:1})}),[b,g,m]),R=nr(),P=R==null?void 0:R.registerPopover,A=V(()=>{var N;return(N=R==null?void 0:R.isFocusWithinPopoverGroup())!=null?N:(v==null?void 0:v.activeElement)&&((a==null?void 0:a.contains(v.activeElement))||(f==null?void 0:f.contains(v.activeElement)))});c.useEffect(()=>P==null?void 0:P(T),[P,T]),lo(v==null?void 0:v.defaultView,"focus",N=>{var S,E,w,I;l===0&&(A()||a&&f&&N.target!==window&&((E=(S=h.current)==null?void 0:S.contains)!=null&&E.call(S,N.target)||(I=(w=p.current)==null?void 0:w.contains)!=null&&I.call(w,N.target)||m({type:1})))},!0),qn([a,f],(N,S)=>{m({type:1}),mt(S,pt.Loose)||(N.preventDefault(),a==null||a.focus())},l===0);let M=V(N=>{m({type:1});let S=(()=>N?N instanceof HTMLElement?N:"current"in N&&N.current instanceof HTMLElement?N.current:a:a)();S==null||S.focus()}),D=c.useMemo(()=>({close:M,isPortalled:y}),[M,y]),j=c.useMemo(()=>({open:l===0,close:M}),[l,M]),$=e,F={ref:o};return Y.createElement(gt.Provider,{value:null},Y.createElement(Qt.Provider,{value:i},Y.createElement(Zt.Provider,{value:D},Y.createElement(Xt,{value:X(l,{0:K.Open,1:K.Closed})},oe({ourProps:F,theirProps:$,slot:j,defaultTag:Wo,name:"Popover"})))))}let Uo="button";function Yo(e,t){let n=be(),{id:r=`headlessui-popover-button-${n}`,...o}=e,[s,i]=vt("Popover.Button"),{isPortalled:l}=Jt("Popover.Button"),a=c.useRef(null),u=`headlessui-focus-sentinel-${be()}`,f=nr(),d=f==null?void 0:f.closeOthers,h=Bo()!==null;c.useEffect(()=>{if(!h)return i({type:3,buttonId:r}),()=>{i({type:3,buttonId:null})}},[h,r,i]);let[p]=c.useState(()=>Symbol()),m=re(a,t,h?null:F=>{if(F)s.buttons.current.push(p);else{let N=s.buttons.current.indexOf(p);N!==-1&&s.buttons.current.splice(N,1)}s.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),F&&i({type:2,button:F})}),v=re(a,t),y=_e(a),b=V(F=>{var N,S,E;if(h){if(s.popoverState===1)return;switch(F.key){case z.Space:case z.Enter:F.preventDefault(),(S=(N=F.target).click)==null||S.call(N),i({type:1}),(E=s.button)==null||E.focus();break}}else switch(F.key){case z.Space:case z.Enter:F.preventDefault(),F.stopPropagation(),s.popoverState===1&&(d==null||d(s.buttonId)),i({type:0});break;case z.Escape:if(s.popoverState!==0)return d==null?void 0:d(s.buttonId);if(!a.current||y!=null&&y.activeElement&&!a.current.contains(y.activeElement))return;F.preventDefault(),F.stopPropagation(),i({type:1});break}}),g=V(F=>{h||F.key===z.Space&&F.preventDefault()}),T=V(F=>{var N,S;qt(F.currentTarget)||e.disabled||(h?(i({type:1}),(N=s.button)==null||N.focus()):(F.preventDefault(),F.stopPropagation(),s.popoverState===1&&(d==null||d(s.buttonId)),i({type:0}),(S=s.button)==null||S.focus()))}),R=V(F=>{F.preventDefault(),F.stopPropagation()}),P=s.popoverState===0,A=c.useMemo(()=>({open:P}),[P]),M=zn(e,a),D=h?{ref:v,type:M,onKeyDown:b,onClick:T}:{ref:m,id:s.buttonId,type:M,"aria-expanded":e.disabled?void 0:s.popoverState===0,"aria-controls":s.panel?s.panelId:void 0,onKeyDown:b,onKeyUp:g,onClick:T,onMouseDown:R},j=Jn(),$=V(()=>{let F=s.panel;if(!F)return;function N(){X(j.current,{[ye.Forwards]:()=>Pe(F,ae.First),[ye.Backwards]:()=>Pe(F,ae.Last)})===rt.Error&&Pe(Ge().filter(S=>S.dataset.headlessuiFocusGuard!=="true"),X(j.current,{[ye.Forwards]:ae.Next,[ye.Backwards]:ae.Previous}),{relativeTo:s.button})}N()});return Y.createElement(Y.Fragment,null,oe({ourProps:D,theirProps:o,slot:A,defaultTag:Uo,name:"Popover.Button"}),P&&!h&&l&&Y.createElement(Dt,{id:u,features:ot.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:$}))}let Go="div",qo=Re.RenderStrategy|Re.Static;function zo(e,t){let n=be(),{id:r=`headlessui-popover-overlay-${n}`,...o}=e,[{popoverState:s},i]=vt("Popover.Overlay"),l=re(t),a=qe(),u=(()=>a!==null?(a&K.Open)===K.Open:s===0)(),f=V(h=>{if(qt(h.currentTarget))return h.preventDefault();i({type:1})}),d=c.useMemo(()=>({open:s===0}),[s]);return oe({ourProps:{ref:l,id:r,"aria-hidden":!0,onClick:f},theirProps:o,slot:d,defaultTag:Go,features:qo,visible:u,name:"Popover.Overlay"})}let Xo="div",Ko=Re.RenderStrategy|Re.Static;function Qo(e,t){let n=be(),{id:r=`headlessui-popover-panel-${n}`,focus:o=!1,...s}=e,[i,l]=vt("Popover.Panel"),{close:a,isPortalled:u}=Jt("Popover.Panel"),f=`headlessui-focus-sentinel-before-${be()}`,d=`headlessui-focus-sentinel-after-${be()}`,h=c.useRef(null),p=re(h,t,M=>{l({type:4,panel:M})}),m=_e(h);ne(()=>(l({type:5,panelId:r}),()=>{l({type:5,panelId:null})}),[r,l]);let v=qe(),y=(()=>v!==null?(v&K.Open)===K.Open:i.popoverState===0)(),b=V(M=>{var D;switch(M.key){case z.Escape:if(i.popoverState!==0||!h.current||m!=null&&m.activeElement&&!h.current.contains(m.activeElement))return;M.preventDefault(),M.stopPropagation(),l({type:1}),(D=i.button)==null||D.focus();break}});c.useEffect(()=>{var M;e.static||i.popoverState===1&&((M=e.unmount)==null||M)&&l({type:4,panel:null})},[i.popoverState,e.unmount,e.static,l]),c.useEffect(()=>{if(!o||i.popoverState!==0||!h.current)return;let M=m==null?void 0:m.activeElement;h.current.contains(M)||Pe(h.current,ae.First)},[o,h,i.popoverState]);let g=c.useMemo(()=>({open:i.popoverState===0,close:a}),[i,a]),T={ref:p,id:r,onKeyDown:b,onBlur:o&&i.popoverState===0?M=>{var D,j,$,F,N;let S=M.relatedTarget;S&&h.current&&((D=h.current)!=null&&D.contains(S)||(l({type:1}),(($=(j=i.beforePanelSentinel.current)==null?void 0:j.contains)!=null&&$.call(j,S)||(N=(F=i.afterPanelSentinel.current)==null?void 0:F.contains)!=null&&N.call(F,S))&&S.focus({preventScroll:!0})))}:void 0,tabIndex:-1},R=Jn(),P=V(()=>{let M=h.current;if(!M)return;function D(){X(R.current,{[ye.Forwards]:()=>{var j;Pe(M,ae.First)===rt.Error&&((j=i.afterPanelSentinel.current)==null||j.focus())},[ye.Backwards]:()=>{var j;(j=i.button)==null||j.focus({preventScroll:!0})}})}D()}),A=V(()=>{let M=h.current;if(!M)return;function D(){X(R.current,{[ye.Forwards]:()=>{var j;if(!i.button)return;let $=Ge(),F=$.indexOf(i.button),N=$.slice(0,F+1),S=[...$.slice(F+1),...N];for(let E of S.slice())if(E.dataset.headlessuiFocusGuard==="true"||(j=i.panel)!=null&&j.contains(E)){let w=S.indexOf(E);w!==-1&&S.splice(w,1)}Pe(S,ae.First,{sorted:!1})},[ye.Backwards]:()=>{var j;Pe(M,ae.Previous)===rt.Error&&((j=i.button)==null||j.focus())}})}D()});return Y.createElement(gt.Provider,{value:r},y&&u&&Y.createElement(Dt,{id:f,ref:i.beforePanelSentinel,features:ot.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:P}),oe({ourProps:T,theirProps:s,slot:g,defaultTag:Xo,features:Ko,visible:y,name:"Popover.Panel"}),y&&u&&Y.createElement(Dt,{id:d,ref:i.afterPanelSentinel,features:ot.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:A}))}let Zo="div";function Jo(e,t){let n=c.useRef(null),r=re(n,t),[o,s]=c.useState([]),i=V(m=>{s(v=>{let y=v.indexOf(m);if(y!==-1){let b=v.slice();return b.splice(y,1),b}return v})}),l=V(m=>(s(v=>[...v,m]),()=>i(m))),a=V(()=>{var m;let v=Ye(n);if(!v)return!1;let y=v.activeElement;return(m=n.current)!=null&&m.contains(y)?!0:o.some(b=>{var g,T;return((g=v.getElementById(b.buttonId.current))==null?void 0:g.contains(y))||((T=v.getElementById(b.panelId.current))==null?void 0:T.contains(y))})}),u=V(m=>{for(let v of o)v.buttonId.current!==m&&v.close()}),f=c.useMemo(()=>({registerPopover:l,unregisterPopover:i,isFocusWithinPopoverGroup:a,closeOthers:u}),[l,i,a,u]),d=c.useMemo(()=>({}),[]),h=e,p={ref:r};return Y.createElement(en.Provider,{value:f},oe({ourProps:p,theirProps:h,slot:d,defaultTag:Zo,name:"Popover.Group"}))}let ei=te(Vo),ti=te(Yo),ni=te(zo),ri=te(Qo),oi=te(Jo),hn=Object.assign(ei,{Button:ti,Overlay:ni,Panel:ri,Group:oi});function ii(e=0){let[t,n]=c.useState(e),r=c.useCallback(l=>n(a=>a|l),[t]),o=c.useCallback(l=>!!(t&l),[t]),s=c.useCallback(l=>n(a=>a&~l),[n]),i=c.useCallback(l=>n(a=>a^l),[n]);return{flags:t,addFlag:r,hasFlag:o,removeFlag:s,toggleFlag:i}}function si(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function Ft(e,...t){e&&t.length>0&&e.classList.add(...t)}function Nt(e,...t){e&&t.length>0&&e.classList.remove(...t)}function li(e,t){let n=we();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:o}=getComputedStyle(e),[s,i]=[r,o].map(a=>{let[u=0]=a.split(",").filter(Boolean).map(f=>f.includes("ms")?parseFloat(f):parseFloat(f)*1e3).sort((f,d)=>d-f);return u}),l=s+i;if(l!==0){n.group(u=>{u.setTimeout(()=>{t(),u.dispose()},l),u.addEventListener(e,"transitionrun",f=>{f.target===f.currentTarget&&u.dispose()})});let a=n.addEventListener(e,"transitionend",u=>{u.target===u.currentTarget&&(t(),a())})}else t();return n.add(()=>t()),n.dispose}function ai(e,t,n,r){let o=n?"enter":"leave",s=we(),i=r!==void 0?si(r):()=>{};o==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let l=X(o,{enter:()=>t.enter,leave:()=>t.leave}),a=X(o,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),u=X(o,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return Nt(e,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),Ft(e,...l,...u),s.nextFrame(()=>{Nt(e,...u),Ft(e,...a),li(e,()=>(Nt(e,...l),Ft(e,...t.entered),i()))}),s.dispose}function ci({container:e,direction:t,classes:n,onStart:r,onStop:o}){let s=er(),i=ft(),l=ue(t);ne(()=>{let a=we();i.add(a.dispose);let u=e.current;if(u&&l.current!=="idle"&&s.current)return a.dispose(),r.current(l.current),a.add(ai(u,n.current,l.current==="enter",()=>{a.dispose(),o.current(l.current)})),a.dispose},[t])}function je(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let yt=c.createContext(null);yt.displayName="TransitionContext";var ui=(e=>(e.Visible="visible",e.Hidden="hidden",e))(ui||{});function fi(){let e=c.useContext(yt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function di(){let e=c.useContext(bt);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let bt=c.createContext(null);bt.displayName="NestingContext";function wt(e){return"children"in e?wt(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function rr(e,t){let n=ue(e),r=c.useRef([]),o=er(),s=ft(),i=V((p,m=ge.Hidden)=>{let v=r.current.findIndex(({el:y})=>y===p);v!==-1&&(X(m,{[ge.Unmount](){r.current.splice(v,1)},[ge.Hidden](){r.current[v].state="hidden"}}),s.microTask(()=>{var y;!wt(r)&&o.current&&((y=n.current)==null||y.call(n))}))}),l=V(p=>{let m=r.current.find(({el:v})=>v===p);return m?m.state!=="visible"&&(m.state="visible"):r.current.push({el:p,state:"visible"}),()=>i(p,ge.Unmount)}),a=c.useRef([]),u=c.useRef(Promise.resolve()),f=c.useRef({enter:[],leave:[],idle:[]}),d=V((p,m,v)=>{a.current.splice(0),t&&(t.chains.current[m]=t.chains.current[m].filter(([y])=>y!==p)),t==null||t.chains.current[m].push([p,new Promise(y=>{a.current.push(y)})]),t==null||t.chains.current[m].push([p,new Promise(y=>{Promise.all(f.current[m].map(([b,g])=>g)).then(()=>y())})]),m==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>v(m)):v(m)}),h=V((p,m,v)=>{Promise.all(f.current[m].splice(0).map(([y,b])=>b)).then(()=>{var y;(y=a.current.shift())==null||y()}).then(()=>v(m))});return c.useMemo(()=>({children:r,register:l,unregister:i,onStart:d,onStop:h,wait:u,chains:f}),[l,i,r,d,h,f,u])}function pi(){}let mi=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function vn(e){var t;let n={};for(let r of mi)n[r]=(t=e[r])!=null?t:pi;return n}function hi(e){let t=c.useRef(vn(e));return c.useEffect(()=>{t.current=vn(e)},[e]),t}let vi="div",or=Re.RenderStrategy;function gi(e,t){let{beforeEnter:n,afterEnter:r,beforeLeave:o,afterLeave:s,enter:i,enterFrom:l,enterTo:a,entered:u,leave:f,leaveFrom:d,leaveTo:h,...p}=e,m=c.useRef(null),v=re(m,t),y=p.unmount?ge.Unmount:ge.Hidden,{show:b,appear:g,initial:T}=fi(),[R,P]=c.useState(b?"visible":"hidden"),A=di(),{register:M,unregister:D}=A,j=c.useRef(null);c.useEffect(()=>M(m),[M,m]),c.useEffect(()=>{if(y===ge.Hidden&&m.current){if(b&&R!=="visible"){P("visible");return}return X(R,{hidden:()=>D(m),visible:()=>M(m)})}},[R,m,M,D,b,y]);let $=ue({enter:je(i),enterFrom:je(l),enterTo:je(a),entered:je(u),leave:je(f),leaveFrom:je(d),leaveTo:je(h)}),F=hi({beforeEnter:n,afterEnter:r,beforeLeave:o,afterLeave:s}),N=dt();c.useEffect(()=>{if(N&&R==="visible"&&m.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[m,R,N]);let S=T&&!g,E=(()=>!N||S||j.current===b?"idle":b?"enter":"leave")(),w=ii(0),I=V(H=>X(H,{enter:()=>{w.addFlag(K.Opening),F.current.beforeEnter()},leave:()=>{w.addFlag(K.Closing),F.current.beforeLeave()},idle:()=>{}})),O=V(H=>X(H,{enter:()=>{w.removeFlag(K.Opening),F.current.afterEnter()},leave:()=>{w.removeFlag(K.Closing),F.current.afterLeave()},idle:()=>{}})),k=rr(()=>{P("hidden"),D(m)},A);ci({container:m,classes:$,direction:E,onStart:ue(H=>{k.onStart(m,H,I)}),onStop:ue(H=>{k.onStop(m,H,O),H==="leave"&&!wt(k)&&(P("hidden"),D(m))})}),c.useEffect(()=>{S&&(y===ge.Hidden?j.current=null:j.current=b)},[b,S,R]);let L=p,B={ref:v};return g&&b&&pe.isServer&&(L={...L,className:Qn(p.className,...$.current.enter,...$.current.enterFrom)}),Y.createElement(bt.Provider,{value:k},Y.createElement(Xt,{value:X(R,{visible:K.Open,hidden:K.Closed})|w.flags},oe({ourProps:B,theirProps:L,defaultTag:vi,features:or,visible:R==="visible",name:"Transition.Child"})))}function yi(e,t){let{show:n,appear:r=!1,unmount:o,...s}=e,i=c.useRef(null),l=re(i,t);dt();let a=qe();if(n===void 0&&a!==null&&(n=(a&K.Open)===K.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[u,f]=c.useState(n?"visible":"hidden"),d=rr(()=>{f("hidden")}),[h,p]=c.useState(!0),m=c.useRef([n]);ne(()=>{h!==!1&&m.current[m.current.length-1]!==n&&(m.current.push(n),p(!1))},[m,n]);let v=c.useMemo(()=>({show:n,appear:r,initial:h}),[n,r,h]);c.useEffect(()=>{if(n)f("visible");else if(!wt(d))f("hidden");else{let b=i.current;if(!b)return;let g=b.getBoundingClientRect();g.x===0&&g.y===0&&g.width===0&&g.height===0&&f("hidden")}},[n,d]);let y={unmount:o};return Y.createElement(bt.Provider,{value:d},Y.createElement(yt.Provider,{value:v},oe({ourProps:{...y,as:c.Fragment,children:Y.createElement(ir,{ref:l,...y,...s})},theirProps:{},defaultTag:c.Fragment,features:or,visible:u==="visible",name:"Transition"})))}function bi(e,t){let n=c.useContext(yt)!==null,r=qe()!==null;return Y.createElement(Y.Fragment,null,!n&&r?Y.createElement(kt,{ref:t,...e}):Y.createElement(ir,{ref:t,...e}))}let kt=te(yi),ir=te(gi),wi=te(bi),Lt=Object.assign(kt,{Child:wi,Root:kt});const xi=()=>{const{isPending:e}=ut(),{setTamagotchi:t}=Ue(),{resetLesson:n}=Ie(),r=[{id:4,label:"Upload Contract",action:()=>{t(void 0),n()},icon:"upload"}];return x.jsx("div",{className:"",children:x.jsx(Qe,{as:"div",className:"relative inline-block",children:({open:o})=>x.jsxs(x.Fragment,{children:[x.jsx(Qe.Button,{className:Oe("inline-flex w-full justify-center rounded-full bg-white px-4 py-1.5 text-sm font-semibold font-kanit text-white transition-colors","focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75",o?"bg-opacity-30":"bg-opacity-10 hover:bg-opacity-30",e&&"opacity-50 pointer-events-none"),disabled:e,children:"Options"}),x.jsx(Lt,{as:c.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:x.jsx(Qe.Items,{className:"absolute right-0 mt-2 origin-top-right divide-y divide-gray-100 rounded-md bg-[#353535] shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:x.jsx("div",{className:"py-2 font-kanit font-semibold text-sm whitespace-nowrap",children:r.map(s=>x.jsx(Qe.Item,{children:({active:i})=>x.jsxs("button",{className:Oe("flex items-center gap-2 w-full px-6 py-2 text-white transition-colors",i&&"text-opacity-70"),onClick:s.action,children:[x.jsx(ee,{name:s.icon,className:"w-5 h-5"}),s.label]})},s.id))})})})]})})})},sr=["top","right","bottom","left"],gn=["start","end"],yn=sr.reduce((e,t)=>e.concat(t,t+"-"+gn[0],t+"-"+gn[1]),[]),ke=Math.min,Fe=Math.max,it=Math.round,Ze=Math.floor,Te=e=>({x:e,y:e}),Ei={left:"right",right:"left",bottom:"top",top:"bottom"},Si={start:"end",end:"start"};function _t(e,t,n){return Fe(e,ke(t,n))}function Me(e,t){return typeof e=="function"?e(t):e}function xe(e){return e.split("-")[0]}function me(e){return e.split("-")[1]}function lr(e){return e==="x"?"y":"x"}function tn(e){return e==="y"?"height":"width"}function xt(e){return["top","bottom"].includes(xe(e))?"y":"x"}function nn(e){return lr(xt(e))}function ar(e,t,n){n===void 0&&(n=!1);const r=me(e),o=nn(e),s=tn(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(i=lt(i)),[i,lt(i)]}function Pi(e){const t=lt(e);return[st(e),t,st(t)]}function st(e){return e.replace(/start|end/g,t=>Si[t])}function $i(e,t,n){const r=["left","right"],o=["right","left"],s=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return n?t?o:r:t?r:o;case"left":case"right":return t?s:i;default:return[]}}function Oi(e,t,n,r){const o=me(e);let s=$i(xe(e),n==="start",r);return o&&(s=s.map(i=>i+"-"+o),t&&(s=s.concat(s.map(st)))),s}function lt(e){return e.replace(/left|right|bottom|top/g,t=>Ei[t])}function Ri(e){return{top:0,right:0,bottom:0,left:0,...e}}function cr(e){return typeof e!="number"?Ri(e):{top:e,right:e,bottom:e,left:e}}function at(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function bn(e,t,n){let{reference:r,floating:o}=e;const s=xt(t),i=nn(t),l=tn(i),a=xe(t),u=s==="y",f=r.x+r.width/2-o.width/2,d=r.y+r.height/2-o.height/2,h=r[l]/2-o[l]/2;let p;switch(a){case"top":p={x:f,y:r.y-o.height};break;case"bottom":p={x:f,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-o.width,y:d};break;default:p={x:r.x,y:r.y}}switch(me(t)){case"start":p[i]-=h*(n&&u?-1:1);break;case"end":p[i]+=h*(n&&u?-1:1);break}return p}const Ti=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:s=[],platform:i}=n,l=s.filter(Boolean),a=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:f,y:d}=bn(u,r,a),h=r,p={},m=0;for(let v=0;v<l.length;v++){const{name:y,fn:b}=l[v],{x:g,y:T,data:R,reset:P}=await b({x:f,y:d,initialPlacement:r,placement:h,strategy:o,middlewareData:p,rects:u,platform:i,elements:{reference:e,floating:t}});if(f=g??f,d=T??d,p={...p,[y]:{...p[y],...R}},P&&m<=50){m++,typeof P=="object"&&(P.placement&&(h=P.placement),P.rects&&(u=P.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):P.rects),{x:f,y:d}=bn(u,h,a)),v=-1;continue}}return{x:f,y:d,placement:h,strategy:o,middlewareData:p}};async function He(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:s,rects:i,elements:l,strategy:a}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:d="floating",altBoundary:h=!1,padding:p=0}=Me(t,e),m=cr(p),y=l[h?d==="floating"?"reference":"floating":d],b=at(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:a})),g=d==="floating"?{...i.floating,x:r,y:o}:i.reference,T=await(s.getOffsetParent==null?void 0:s.getOffsetParent(l.floating)),R=await(s.isElement==null?void 0:s.isElement(T))?await(s.getScale==null?void 0:s.getScale(T))||{x:1,y:1}:{x:1,y:1},P=at(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:g,offsetParent:T,strategy:a}):g);return{top:(b.top-P.top+m.top)/R.y,bottom:(P.bottom-b.bottom+m.bottom)/R.y,left:(b.left-P.left+m.left)/R.x,right:(P.right-b.right+m.right)/R.x}}const wn=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:s,platform:i,elements:l,middlewareData:a}=t,{element:u,padding:f=0}=Me(e,t)||{};if(u==null)return{};const d=cr(f),h={x:n,y:r},p=nn(o),m=tn(p),v=await i.getDimensions(u),y=p==="y",b=y?"top":"left",g=y?"bottom":"right",T=y?"clientHeight":"clientWidth",R=s.reference[m]+s.reference[p]-h[p]-s.floating[m],P=h[p]-s.reference[p],A=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let M=A?A[T]:0;(!M||!await(i.isElement==null?void 0:i.isElement(A)))&&(M=l.floating[T]||s.floating[m]);const D=R/2-P/2,j=M/2-v[m]/2-1,$=ke(d[b],j),F=ke(d[g],j),N=$,S=M-v[m]-F,E=M/2-v[m]/2+D,w=_t(N,E,S),I=!a.arrow&&me(o)!=null&&E!=w&&s.reference[m]/2-(E<N?$:F)-v[m]/2<0,O=I?E<N?E-N:E-S:0;return{[p]:h[p]+O,data:{[p]:w,centerOffset:E-w-O,...I&&{alignmentOffset:O}},reset:I}}});function Ci(e,t,n){return(e?[...n.filter(o=>me(o)===e),...n.filter(o=>me(o)!==e)]:n.filter(o=>xe(o)===o)).filter(o=>e?me(o)===e||(t?st(o)!==o:!1):!0)}const ji=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var n,r,o;const{rects:s,middlewareData:i,placement:l,platform:a,elements:u}=t,{crossAxis:f=!1,alignment:d,allowedPlacements:h=yn,autoAlignment:p=!0,...m}=Me(e,t),v=d!==void 0||h===yn?Ci(d||null,p,h):h,y=await He(t,m),b=((n=i.autoPlacement)==null?void 0:n.index)||0,g=v[b];if(g==null)return{};const T=ar(g,s,await(a.isRTL==null?void 0:a.isRTL(u.floating)));if(l!==g)return{reset:{placement:v[0]}};const R=[y[xe(g)],y[T[0]],y[T[1]]],P=[...((r=i.autoPlacement)==null?void 0:r.overflows)||[],{placement:g,overflows:R}],A=v[b+1];if(A)return{data:{index:b+1,overflows:P},reset:{placement:A}};const M=P.map($=>{const F=me($.placement);return[$.placement,F&&f?$.overflows.slice(0,2).reduce((N,S)=>N+S,0):$.overflows[0],$.overflows]}).sort(($,F)=>$[1]-F[1]),j=((o=M.filter($=>$[2].slice(0,me($[0])?2:3).every(F=>F<=0))[0])==null?void 0:o[0])||M[0][0];return j!==l?{data:{index:b+1,overflows:P},reset:{placement:j}}:{}}}},Fi=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:s,rects:i,initialPlacement:l,platform:a,elements:u}=t,{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:v=!0,...y}=Me(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const b=xe(o),g=xe(l)===l,T=await(a.isRTL==null?void 0:a.isRTL(u.floating)),R=h||(g||!v?[lt(l)]:Pi(l));!h&&m!=="none"&&R.push(...Oi(l,v,m,T));const P=[l,...R],A=await He(t,y),M=[];let D=((r=s.flip)==null?void 0:r.overflows)||[];if(f&&M.push(A[b]),d){const N=ar(o,i,T);M.push(A[N[0]],A[N[1]])}if(D=[...D,{placement:o,overflows:M}],!M.every(N=>N<=0)){var j,$;const N=(((j=s.flip)==null?void 0:j.index)||0)+1,S=P[N];if(S)return{data:{index:N,overflows:D},reset:{placement:S}};let E=($=D.filter(w=>w.overflows[0]<=0).sort((w,I)=>w.overflows[1]-I.overflows[1])[0])==null?void 0:$.placement;if(!E)switch(p){case"bestFit":{var F;const w=(F=D.map(I=>[I.placement,I.overflows.filter(O=>O>0).reduce((O,k)=>O+k,0)]).sort((I,O)=>I[1]-O[1])[0])==null?void 0:F[0];w&&(E=w);break}case"initialPlacement":E=l;break}if(o!==E)return{reset:{placement:E}}}return{}}}};function xn(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function En(e){return sr.some(t=>e[t]>=0)}const Ni=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=Me(e,t);switch(r){case"referenceHidden":{const s=await He(t,{...o,elementContext:"reference"}),i=xn(s,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:En(i)}}}case"escaped":{const s=await He(t,{...o,altBoundary:!0}),i=xn(s,n.floating);return{data:{escapedOffsets:i,escaped:En(i)}}}default:return{}}}}};async function Ii(e,t){const{placement:n,platform:r,elements:o}=e,s=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=xe(n),l=me(n),a=xt(n)==="y",u=["left","top"].includes(i)?-1:1,f=s&&a?-1:1,d=Me(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return l&&typeof m=="number"&&(p=l==="end"?m*-1:m),a?{x:p*f,y:h*u}:{x:h*u,y:p*f}}const Mi=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){const{x:n,y:r}=t,o=await Ii(t,e);return{x:n+o.x,y:r+o.y,data:o}}}},Ai=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:s=!0,crossAxis:i=!1,limiter:l={fn:y=>{let{x:b,y:g}=y;return{x:b,y:g}}},...a}=Me(e,t),u={x:n,y:r},f=await He(t,a),d=xt(xe(o)),h=lr(d);let p=u[h],m=u[d];if(s){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",g=p+f[y],T=p-f[b];p=_t(g,p,T)}if(i){const y=d==="y"?"top":"left",b=d==="y"?"bottom":"right",g=m+f[y],T=m-f[b];m=_t(g,m,T)}const v=l.fn({...t,[h]:p,[d]:m});return{...v,data:{x:v.x-n,y:v.y-r}}}}};function Ce(e){return ur(e)?(e.nodeName||"").toLowerCase():"#document"}function ie(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Se(e){var t;return(t=(ur(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ur(e){return e instanceof Node||e instanceof ie(e).Node}function Ee(e){return e instanceof Element||e instanceof ie(e).Element}function he(e){return e instanceof HTMLElement||e instanceof ie(e).HTMLElement}function Sn(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ie(e).ShadowRoot}function ze(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=se(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(o)}function Di(e){return["table","td","th"].includes(Ce(e))}function rn(e){const t=on(),n=se(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function ki(e){let t=Le(e);for(;he(t)&&!Et(t);){if(rn(t))return t;t=Le(t)}return null}function on(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Et(e){return["html","body","#document"].includes(Ce(e))}function se(e){return ie(e).getComputedStyle(e)}function St(e){return Ee(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Le(e){if(Ce(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Sn(e)&&e.host||Se(e);return Sn(t)?t.host:t}function fr(e){const t=Le(e);return Et(t)?e.ownerDocument?e.ownerDocument.body:e.body:he(t)&&ze(t)?t:fr(t)}function We(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=fr(e),s=o===((r=e.ownerDocument)==null?void 0:r.body),i=ie(o);return s?t.concat(i,i.visualViewport||[],ze(o)?o:[],i.frameElement&&n?We(i.frameElement):[]):t.concat(o,We(o,[],n))}function dr(e){const t=se(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=he(e),s=o?e.offsetWidth:n,i=o?e.offsetHeight:r,l=it(n)!==s||it(r)!==i;return l&&(n=s,r=i),{width:n,height:r,$:l}}function sn(e){return Ee(e)?e:e.contextElement}function De(e){const t=sn(e);if(!he(t))return Te(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:s}=dr(t);let i=(s?it(n.width):n.width)/r,l=(s?it(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const Li=Te(0);function pr(e){const t=ie(e);return!on()||!t.visualViewport?Li:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function _i(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==ie(e)?!1:t}function Ne(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),s=sn(e);let i=Te(1);t&&(r?Ee(r)&&(i=De(r)):i=De(e));const l=_i(s,n,r)?pr(s):Te(0);let a=(o.left+l.x)/i.x,u=(o.top+l.y)/i.y,f=o.width/i.x,d=o.height/i.y;if(s){const h=ie(s),p=r&&Ee(r)?ie(r):r;let m=h.frameElement;for(;m&&r&&p!==h;){const v=De(m),y=m.getBoundingClientRect(),b=se(m),g=y.left+(m.clientLeft+parseFloat(b.paddingLeft))*v.x,T=y.top+(m.clientTop+parseFloat(b.paddingTop))*v.y;a*=v.x,u*=v.y,f*=v.x,d*=v.y,a+=g,u+=T,m=ie(m).frameElement}}return at({width:f,height:d,x:a,y:u})}function Bi(e){let{rect:t,offsetParent:n,strategy:r}=e;const o=he(n),s=Se(n);if(n===s)return t;let i={scrollLeft:0,scrollTop:0},l=Te(1);const a=Te(0);if((o||!o&&r!=="fixed")&&((Ce(n)!=="body"||ze(s))&&(i=St(n)),he(n))){const u=Ne(n);l=De(n),a.x=u.x+n.clientLeft,a.y=u.y+n.clientTop}return{width:t.width*l.x,height:t.height*l.y,x:t.x*l.x-i.scrollLeft*l.x+a.x,y:t.y*l.y-i.scrollTop*l.y+a.y}}function Hi(e){return Array.from(e.getClientRects())}function mr(e){return Ne(Se(e)).left+St(e).scrollLeft}function Wi(e){const t=Se(e),n=St(e),r=e.ownerDocument.body,o=Fe(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Fe(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+mr(e);const l=-n.scrollTop;return se(r).direction==="rtl"&&(i+=Fe(t.clientWidth,r.clientWidth)-o),{width:o,height:s,x:i,y:l}}function Vi(e,t){const n=ie(e),r=Se(e),o=n.visualViewport;let s=r.clientWidth,i=r.clientHeight,l=0,a=0;if(o){s=o.width,i=o.height;const u=on();(!u||u&&t==="fixed")&&(l=o.offsetLeft,a=o.offsetTop)}return{width:s,height:i,x:l,y:a}}function Ui(e,t){const n=Ne(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,s=he(e)?De(e):Te(1),i=e.clientWidth*s.x,l=e.clientHeight*s.y,a=o*s.x,u=r*s.y;return{width:i,height:l,x:a,y:u}}function Pn(e,t,n){let r;if(t==="viewport")r=Vi(e,n);else if(t==="document")r=Wi(Se(e));else if(Ee(t))r=Ui(t,n);else{const o=pr(e);r={...t,x:t.x-o.x,y:t.y-o.y}}return at(r)}function hr(e,t){const n=Le(e);return n===t||!Ee(n)||Et(n)?!1:se(n).position==="fixed"||hr(n,t)}function Yi(e,t){const n=t.get(e);if(n)return n;let r=We(e,[],!1).filter(l=>Ee(l)&&Ce(l)!=="body"),o=null;const s=se(e).position==="fixed";let i=s?Le(e):e;for(;Ee(i)&&!Et(i);){const l=se(i),a=rn(i);!a&&l.position==="fixed"&&(o=null),(s?!a&&!o:!a&&l.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||ze(i)&&!a&&hr(e,i))?r=r.filter(f=>f!==i):o=l,i=Le(i)}return t.set(e,r),r}function Gi(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?Yi(t,this._c):[].concat(n),r],l=i[0],a=i.reduce((u,f)=>{const d=Pn(t,f,o);return u.top=Fe(d.top,u.top),u.right=ke(d.right,u.right),u.bottom=ke(d.bottom,u.bottom),u.left=Fe(d.left,u.left),u},Pn(t,l,o));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function qi(e){return dr(e)}function zi(e,t,n){const r=he(t),o=Se(t),s=n==="fixed",i=Ne(e,!0,s,t);let l={scrollLeft:0,scrollTop:0};const a=Te(0);if(r||!r&&!s)if((Ce(t)!=="body"||ze(o))&&(l=St(t)),r){const u=Ne(t,!0,s,t);a.x=u.x+t.clientLeft,a.y=u.y+t.clientTop}else o&&(a.x=mr(o));return{x:i.left+l.scrollLeft-a.x,y:i.top+l.scrollTop-a.y,width:i.width,height:i.height}}function $n(e,t){return!he(e)||se(e).position==="fixed"?null:t?t(e):e.offsetParent}function vr(e,t){const n=ie(e);if(!he(e))return n;let r=$n(e,t);for(;r&&Di(r)&&se(r).position==="static";)r=$n(r,t);return r&&(Ce(r)==="html"||Ce(r)==="body"&&se(r).position==="static"&&!rn(r))?n:r||ki(e)||n}const Xi=async function(e){let{reference:t,floating:n,strategy:r}=e;const o=this.getOffsetParent||vr,s=this.getDimensions;return{reference:zi(t,await o(n),r),floating:{x:0,y:0,...await s(n)}}};function Ki(e){return se(e).direction==="rtl"}const Qi={convertOffsetParentRelativeRectToViewportRelativeRect:Bi,getDocumentElement:Se,getClippingRect:Gi,getOffsetParent:vr,getElementRects:Xi,getClientRects:Hi,getDimensions:qi,getScale:De,isElement:Ee,isRTL:Ki};function Zi(e,t){let n=null,r;const o=Se(e);function s(){clearTimeout(r),n&&n.disconnect(),n=null}function i(l,a){l===void 0&&(l=!1),a===void 0&&(a=1),s();const{left:u,top:f,width:d,height:h}=e.getBoundingClientRect();if(l||t(),!d||!h)return;const p=Ze(f),m=Ze(o.clientWidth-(u+d)),v=Ze(o.clientHeight-(f+h)),y=Ze(u),g={rootMargin:-p+"px "+-m+"px "+-v+"px "+-y+"px",threshold:Fe(0,ke(1,a))||1};let T=!0;function R(P){const A=P[0].intersectionRatio;if(A!==a){if(!T)return i();A?i(!1,A):r=setTimeout(()=>{i(!1,1e-7)},100)}T=!1}try{n=new IntersectionObserver(R,{...g,root:o.ownerDocument})}catch{n=new IntersectionObserver(R,g)}n.observe(e)}return i(!0),s}function Ji(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:s=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:a=!1}=r,u=sn(e),f=o||s?[...u?We(u):[],...We(t)]:[];f.forEach(b=>{o&&b.addEventListener("scroll",n,{passive:!0}),s&&b.addEventListener("resize",n)});const d=u&&l?Zi(u,n):null;let h=-1,p=null;i&&(p=new ResizeObserver(b=>{let[g]=b;g&&g.target===u&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{p&&p.observe(t)})),n()}),u&&!a&&p.observe(u),p.observe(t));let m,v=a?Ne(e):null;a&&y();function y(){const b=Ne(e);v&&(b.x!==v.x||b.y!==v.y||b.width!==v.width||b.height!==v.height)&&n(),v=b,m=requestAnimationFrame(y)}return n(),()=>{f.forEach(b=>{o&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d&&d(),p&&p.disconnect(),p=null,a&&cancelAnimationFrame(m)}}const es=(e,t,n)=>{const r=new Map,o={platform:Qi,...n},s={...o.platform,_c:r};return Ti(e,t,{...o,platform:s})},ts=e=>{const{element:t,padding:n}=e;function r(o){return Object.prototype.hasOwnProperty.call(o,"current")}return{name:"arrow",options:e,fn(o){return r(t)?t.current!=null?wn({element:t.current,padding:n}).fn(o):{}:t?wn({element:t,padding:n}).fn(o):{}}}};var tt=typeof document<"u"?c.useLayoutEffect:c.useEffect;function ct(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!ct(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!ct(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function On(e){const t=c.useRef(e);return tt(()=>{t.current=e}),t}function ns(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,whileElementsMounted:s,open:i}=e,[l,a]=c.useState({x:null,y:null,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[u,f]=c.useState(r);ct(u,r)||f(r);const d=c.useRef(null),h=c.useRef(null),p=c.useRef(l),m=On(s),v=On(o),[y,b]=c.useState(null),[g,T]=c.useState(null),R=c.useCallback($=>{d.current!==$&&(d.current=$,b($))},[]),P=c.useCallback($=>{h.current!==$&&(h.current=$,T($))},[]),A=c.useCallback(()=>{if(!d.current||!h.current)return;const $={placement:t,strategy:n,middleware:u};v.current&&($.platform=v.current),es(d.current,h.current,$).then(F=>{const N={...F,isPositioned:!0};M.current&&!ct(p.current,N)&&(p.current=N,Hn.flushSync(()=>{a(N)}))})},[u,t,n,v]);tt(()=>{i===!1&&p.current.isPositioned&&(p.current.isPositioned=!1,a($=>({...$,isPositioned:!1})))},[i]);const M=c.useRef(!1);tt(()=>(M.current=!0,()=>{M.current=!1}),[]),tt(()=>{if(y&&g){if(m.current)return m.current(y,g,A);A()}},[y,g,A,m]);const D=c.useMemo(()=>({reference:d,floating:h,setReference:R,setFloating:P}),[R,P]),j=c.useMemo(()=>({reference:y,floating:g}),[y,g]);return c.useMemo(()=>({...l,update:A,refs:D,elements:j,reference:R,floating:P}),[l,A,D,j,R,P])}var rs=typeof document<"u"?c.useLayoutEffect:c.useEffect;function os(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){e.set(t,(e.get(t)||[]).filter(r=>r!==n))}}}const is=c.createContext(null),ss=()=>c.useContext(is);function ls(e){return(e==null?void 0:e.ownerDocument)||document}function as(e){return ls(e).defaultView||window}function Je(e){return e?e instanceof as(e).Element:!1}const cs=Tr["useInsertionEffect".toString()],us=cs||(e=>e());function fs(e){const t=c.useRef(()=>{});return us(()=>{t.current=e}),c.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function ds(e){e===void 0&&(e={});const{open:t=!1,onOpenChange:n,nodeId:r}=e,o=ns(e),s=ss(),i=c.useRef(null),l=c.useRef({}),a=c.useState(()=>os())[0],[u,f]=c.useState(null),d=c.useCallback(b=>{const g=Je(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;o.refs.setReference(g)},[o.refs]),h=c.useCallback(b=>{(Je(b)||b===null)&&(i.current=b,f(b)),(Je(o.refs.reference.current)||o.refs.reference.current===null||b!==null&&!Je(b))&&o.refs.setReference(b)},[o.refs]),p=c.useMemo(()=>({...o.refs,setReference:h,setPositionReference:d,domReference:i}),[o.refs,h,d]),m=c.useMemo(()=>({...o.elements,domReference:u}),[o.elements,u]),v=fs(n),y=c.useMemo(()=>({...o,refs:p,elements:m,dataRef:l,nodeId:r,events:a,open:t,onOpenChange:v}),[o,r,a,t,v,p,m]);return rs(()=>{const b=s==null?void 0:s.nodesRef.current.find(g=>g.id===r);b&&(b.context=y)}),c.useMemo(()=>({...o,context:y,refs:p,reference:h,positionReference:d}),[o,p,y,h,d])}var ps=Object.defineProperty,ms=(e,t,n)=>t in e?ps(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,hs=(e,t,n)=>(ms(e,typeof t!="symbol"?t+"":t,n),n),Bt={},vs={get exports(){return Bt},set exports(e){Bt=e}},Be={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rn;function gs(){if(Rn)return Be;Rn=1;var e=Y,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,o=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function i(l,a,u){var f,d={},h=null,p=null;u!==void 0&&(h=""+u),a.key!==void 0&&(h=""+a.key),a.ref!==void 0&&(p=a.ref);for(f in a)r.call(a,f)&&!s.hasOwnProperty(f)&&(d[f]=a[f]);if(l&&l.defaultProps)for(f in a=l.defaultProps,a)d[f]===void 0&&(d[f]=a[f]);return{$$typeof:t,type:l,key:h,ref:p,props:d,_owner:o.current}}return Be.Fragment=n,Be.jsx=i,Be.jsxs=i,Be}(function(e){e.exports=gs()})(vs);const U=Bt.jsx;class ys{constructor(){hs(this,"current",this.detect())}set(t){this.current!==t&&(this.current=t)}reset(){this.set(this.detect())}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}}const Pt=new ys;function bs(e,t,n,r){c.useEffect(()=>{const o=[];(typeof r.offset=="number"||typeof r.offset=="object"||typeof r.offset=="function")&&o.push(Mi(r.offset)),(r.flip===!0||typeof r.flip=="number"||typeof r.flip=="object")&&o.push(Fi({padding:typeof r.flip=="number"?r.flip:void 0,...typeof r.flip=="object"?r.flip:{}})),(r.shift===!0||typeof r.shift=="number"||typeof r.shift=="object")&&o.push(Ai({padding:typeof r.shift=="number"?r.shift:void 0,...typeof r.shift=="object"?r.shift:{}})),(r.autoPlacement===!0||typeof r.autoPlacement=="object")&&o.push(ji(typeof r.autoPlacement=="object"?r.autoPlacement:void 0)),(r.arrow===!0||typeof r.arrow=="number")&&o.push(ts({element:n,padding:r.arrow===!0?0:r.arrow})),o.push(...typeof r.middleware=="function"?r.middleware({referenceEl:t.reference,floatingEl:t.floating}):r.middleware||[]),(r.hide===!0||typeof r.hide=="object")&&o.push(Ni(typeof r.hide=="object"?r.hide:void 0)),e(o)},[r.offset,r.shift,r.flip,r.arrow,r.autoPlacement,r.hide,r.middleware])}function ws(e,t,n){c.useEffect(()=>{if(e&&Pt.isClient&&typeof ResizeObserver<"u"&&t.current&&t.current instanceof Element){const r=new ResizeObserver(([o])=>{const s=o.borderBoxSize.reduce((i,{inlineSize:l})=>i+l,0);n(s)});return r.observe(t.current),()=>{r.disconnect(),n(null)}}},[])}const xs=e=>{switch(e){case"top":return"origin-bottom";case"bottom":return"origin-top";case"left":return"origin-right";case"right":return"origin-left";case"top-start":case"right-end":return"origin-bottom-left";case"top-end":case"left-end":return"origin-bottom-right";case"right-start":case"bottom-start":return"origin-top-left";case"left-start":case"bottom-end":return"origin-top-right";default:return""}};function Es(e,t){return c.useMemo(()=>typeof e.originClass=="function"?e.originClass(t):typeof e.originClass=="string"?e.originClass:e.tailwindcssOriginClass?xs(t):"",[t,e.originClass,e.tailwindcssOriginClass])}function gr(e,t,...n){if(e in t){const o=t[e];return typeof o=="function"?o(...n):o}const r=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(o=>`"${o}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,gr),r}function yr(e){return Pt.isServer?null:e instanceof Node?e.ownerDocument:e&&Object.prototype.hasOwnProperty.call(e,"current")&&e.current instanceof Node?e.current.ownerDocument:document}const Tn=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var br=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(br||{});function Ss(e,t=0){var n;return e===((n=yr(e))==null?void 0:n.body)?!1:gr(t,{0(){return e.matches(Tn)},1(){let r=e;for(;r!==null;){if(r.matches(Tn))return!0;r=r.parentElement}return!1}})}const Ps=(e,t)=>{Pt.isServer?c.useEffect(e,t):c.useLayoutEffect(e,t)};function $s(e){const t=c.useRef(e);return Ps(()=>{t.current=e},[e]),t}function de(e,t,n){const r=$s(t);c.useEffect(()=>{function o(s){r.current(s)}return document.addEventListener(e,o,n),()=>document.removeEventListener(e,o,n)},[e,n])}function Os(e,t,n=!0){const r=c.useRef(!1);c.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function o(i,l){if(!r.current||i.defaultPrevented)return;const a=function f(d){return typeof d=="function"?f(d()):Array.isArray(d)||d instanceof Set?d:[d]}(e),u=l(i);if(u!==null&&u.getRootNode().contains(u)){for(const f of a){if(f===null)continue;const d=f instanceof HTMLElement?f:f.current;if(d!=null&&d.contains(u)||i.composed&&i.composedPath().includes(d))return}return!Ss(u,br.Loose)&&u.tabIndex!==-1&&i.preventDefault(),t(i,u)}}const s=c.useRef(null);de("mousedown",i=>{var l,a;r.current&&(s.current=((a=(l=i.composedPath)==null?void 0:l.call(i))==null?void 0:a[0])||i.target)},!0),de("click",i=>{s.current&&(o(i,()=>s.current),s.current=null)},!0),de("blur",i=>o(i,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}const ln=c.createContext(null);ln.displayName="ReferenceContext";const an=c.createContext(null);an.displayName="FloatingContext";const Ve=c.createContext(null);Ve.displayName="ArrowContext";function wr(e){const t=c.useContext(ln);if(t===null){const n=new Error(`<${e} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,wr),n}return t}function xr(e){const t=c.useContext(an);if(t===null){const n=new Error(`<${e} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,xr),n}return t}function Er(e){const t=c.useContext(Ve);if(t===null){const n=new Error(`<${e} /> is missing a parent <Float /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Er),n}return t}function Sr(e,t,n,r){const{referenceRef:o}=r,s=t;if(s.as===c.Fragment)return U(e.type,{...e.props,...n,ref:o});const i=s.as||"div";return U(i,{...n,ref:o,children:U(e.type,{...e.props})})}function cn(e,t,n,r){const{floatingRef:o,props:s,mounted:i,setShow:l,x:a,y:u,placement:f,strategy:d,referenceElWidth:h}=r,p={...s,...t},m=Es(p,f),v={show:i.current?p.show:!1,enter:`${p.enter||""} ${m}`,enterFrom:`${p.enterFrom||""}`,enterTo:`${p.enterTo||""}`,leave:`${p.leave||""} ${m}`,leaveFrom:`${p.leaveFrom||""}`,leaveTo:`${p.leaveTo||""}`,beforeEnter:()=>{l(!0)},afterLeave:()=>{l(!1)}},y={style:{...!p.dialog&&(p.transform||p.transform===void 0)?{position:d,zIndex:p.zIndex||9999,top:"0px",left:"0px",right:"auto",bottom:"auto",transform:`translate(${Math.round(a||0)}px,${Math.round(u||0)}px)`}:{position:d,zIndex:p.zIndex||9999,top:`${u||0}px`,left:`${a||0}px`},width:p.adaptiveWidth&&typeof h=="number"?`${h}px`:void 0}};function b(R){return p.portal?U(yo,{children:R}):R}function g(R){const P={...y,...n,ref:o};if(p.as===c.Fragment)return U(R.type,{...R.props,...P});const A=p.as||"div";return U(A,{...P,children:U(R.type,{...R.props})})}function T(){return Pt.isServer?i.current&&p.show?U(e.type,{...e.props}):U(c.Fragment,{}):p.transitionChild?U(Lt.Child,{as:c.Fragment,...v,children:U(e.type,{...e.props})}):U(Lt,{as:c.Fragment,...v,children:U(e.type,{...e.props})})}return b(g(T()))}function Pr([e,t],n){var r,o;const s=c.useRef(!1),[i,l]=c.useState(),a=c.useRef(null),u=c.useMemo(()=>({show:n.onShow||(()=>{}),hide:n.onHide||(()=>{}),update:n.onUpdate||(()=>{})}),[n.onShow,n.onHide,n.onUpdate]),{x:f,y:d,placement:h,strategy:p,update:m,refs:v,middlewareData:y}=ds({placement:n.placement||"bottom-start",strategy:n.strategy,middleware:i}),[b,g]=c.useState(null),T=c.useCallback(()=>{m(),u.update()},[m,u]);c.useEffect(T,[n.placement,n.strategy,i]),bs(l,v,a,n),c.useEffect(()=>{s.current=!0},[]),ws(n.adaptiveWidth,v.reference,g),c.useEffect(()=>{if(v.reference.current&&v.floating.current&&e){const D=n.autoUpdate!==!1?Ji(v.reference.current,v.floating.current,T,typeof n.autoUpdate=="object"?n.autoUpdate:void 0):()=>{};return u.show(),()=>{D(),u.hide()}}},[e,T,v]);const R=c.useRef(!0);c.useEffect(()=>{!(v.reference.current instanceof Element)&&v.reference.current&&v.floating.current&&R.current&&(R.current=!1,T(),window.requestAnimationFrame(()=>{R.current=!0,T()}))},[v]);const P={referenceRef:v.setReference,placement:h},A={floatingRef:v.setFloating,props:n,mounted:s,setShow:t,x:f,y:d,placement:h,strategy:p,referenceElWidth:b},M={arrowRef:a,placement:h,x:(r=y.arrow)==null?void 0:r.x,y:(o=y.arrow)==null?void 0:o.y};return{referenceApi:P,floatingApi:A,arrowApi:M,x:f,y:d,placement:h,strategy:p,update:T,refs:v,middlewareData:y}}const $r=c.forwardRef((e,t)=>{const[n,r]=c.useState(e.show??!1),{referenceApi:o,floatingApi:s,arrowApi:i,placement:l}=Pr([n,r],e),a={placement:l},[u,f]=typeof e.children=="function"?e.children(a):e.children;if(!c.isValidElement(u))return console.warn("<Float /> is missing a reference and floating element."),U(c.Fragment,{});function d(m){if(e.as===c.Fragment||!e.as)return U(c.Fragment,{children:m});const v=e.as||"div";return U(v,{ref:t,className:e.className,children:m})}if(e.composable||e.dialog)return d(U(ln.Provider,{value:o,children:U(an.Provider,{value:s,children:U(Ve.Provider,{value:i,children:typeof e.children=="function"?e.children(a):e.children})})},"FloatingNode"));const h=Sr(u,{as:c.Fragment},{key:"reference-node"},o),p=cn(f,{as:e.floatingAs||"div"},{},s);return d([h,U(Ve.Provider,{value:i,children:p},"floating-node")])});$r.displayName="Float";function Rs(e){if(!e.children)return U(c.Fragment,{});const t=c.useMemo(()=>{const{as:s,children:i,...l}=e;return l},[e]),n=wr("Float.Reference"),{placement:r}=n,o={placement:r};return Sr(typeof e.children=="function"?e.children(o):e.children,{...e,as:e.as||c.Fragment},t,n)}function Ts(e){if(!e.children)return U(c.Fragment,{});const t=c.useMemo(()=>{const{as:s,enter:i,enterFrom:l,enterTo:a,leave:u,leaveFrom:f,leaveTo:d,originClass:h,tailwindcssOriginClass:p,transitionChild:m,children:v,...y}=e;return y},[e]),n=xr("Float.Content"),{placement:r}=n,o={placement:r};return cn(typeof e.children=="function"?e.children(o):e.children,{...e,as:e.as||"div"},t,n)}function Cs(e){const{arrowRef:t,placement:n,x:r,y:o}=Er("Float.Arrow"),s=c.useMemo(()=>{const{as:u,offset:f,children:d,...h}=e;return h},[e]),i={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]],l={left:typeof r=="number"?`${r}px`:void 0,top:typeof o=="number"?`${o}px`:void 0,right:void 0,bottom:void 0,[i]:`${(e.offset??4)*-1}px`,...s.style};if(e.as===c.Fragment){const u={placement:n},f=typeof e.children=="function"?e.children(u):e.children;return!f||!c.isValidElement(f)?U(c.Fragment,{}):U(f.type,{...f.props,ref:t,style:l})}const a=e.as||"div";return U(a,{ref:t,...s,style:l,children:e.children})}function un({onInitial:e,children:t,...n}){const[r,o]=c.useState(n.show??!1),s=c.useMemo(()=>{const{as:h,show:p,placement:m,strategy:v,offset:y,shift:b,flip:g,arrow:T,autoPlacement:R,hide:P,autoUpdate:A,zIndex:M,enter:D,enterFrom:j,enterTo:$,leave:F,leaveFrom:N,leaveTo:S,originClass:E,tailwindcssOriginClass:w,portal:I,transform:O,middleware:k,onShow:L,onHide:B,onUpdate:H,...G}=n;return G},[n]),{floatingApi:i,arrowApi:l,placement:a,refs:u}=Pr([r,o],n);c.useEffect(()=>{o(n.show??!1)},[n.show]);function f(){r&&o(!1)}if(e({show:r,setShow:o,placement:a,refs:u}),!t)return U(c.Fragment,{});const d=cn(typeof t=="function"?t({placement:a,close:f}):t,{...n,as:n.as||c.Fragment,show:r},s,i);return U(Ve.Provider,{value:l,children:d})}function js(e){function t({setShow:n,refs:r}){de("contextmenu",o=>{o.preventDefault(),r.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:o.clientX,y:o.clientY,top:o.clientY,left:o.clientX,right:o.clientX,bottom:o.clientY}}}),n(!0)}),Os(r.floating,()=>{n(!1)})}return U(un,{flip:!0,...e,show:!1,portal:!0,onInitial:t})}function Fs({globalHideCursor:e,...t}){function n({setShow:r,refs:o}){function s(){r(!0)}function i(){r(!1)}function l(d){o.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:d.clientX,y:d.clientY,top:d.clientY,left:d.clientX,right:d.clientX,bottom:d.clientY}}})}function a(d){s(),l(d)}function u(d){s(),l(d.touches[0])}const f=yr(o.floating);f&&(c.useEffect(()=>{if((e||e===void 0)&&!f.getElementById("headlesui-float-cursor-style")){const d=f.createElement("style");return(f.head||f.getElementsByTagName("head")[0]).appendChild(d),d.id="headlesui-float-cursor-style",d.appendChild(f.createTextNode(["*, *::before, *::after {","  cursor: none !important;","}",".headlesui-float-cursor-root {","  pointer-events: none !important;","}"].join(`
`))),()=>{var h;return(h=f.getElementById("headlesui-float-cursor-style"))==null?void 0:h.remove()}}},[e]),"ontouchstart"in window||navigator.maxTouchPoints>0?(de("touchstart",u),de("touchend",i),de("touchmove",u)):(de("mouseenter",a),de("mouseleave",i),de("mousemove",a)))}return U(un,{...t,portal:!0,className:"headlesui-float-cursor-root",onInitial:n})}const Cn=Object.assign($r,{Reference:Rs,Content:Ts,Arrow:Cs,Virtual:un,ContextMenu:js,Cursor:Fs}),It=({label:e,labelBtn:t,value:n,icon:r,onClick:o,tooltipTitle:s,tooltipText:i,isActive:l})=>{const[a,u]=c.useState(!1),f=()=>u(!a),d=Number(n)/100,{isPending:h}=ut(),{isAdmin:p}=Ie();return c.useEffect(()=>{u(l)},[l]),x.jsx(hn,{children:x.jsxs(Cn,{placement:"left",offset:28,shift:16,flip:50,show:a,arrow:!0,portal:!0,enter:"transition duration-200 ease-out",enterFrom:"opacity-0 -translate-y-1",enterTo:"opacity-100 translate-y-0",leave:"transition duration-150 ease-in",leaveFrom:"opacity-100 translate-y-0",leaveTo:"opacity-0 -translate-y-1",children:[x.jsxs("div",{className:"flex gap-12 items-center",children:[x.jsxs("div",{className:"basis-30 grow",children:[x.jsxs("div",{className:"flex items-center justify-between gap-3 text-base leading-5",children:[x.jsxs("span",{className:"inline-flex gap-2 items-center text-white/70 font-kanit font-medium",children:[x.jsx(ee,{name:r,className:"w-5 h-5"})," ",e,":"]}),x.jsx("span",{children:Math.round(d)/10})]}),x.jsx("div",{className:"relative mt-3 bg-white/15 h-2.5 rounded-full overflow-hidden",children:x.jsx("div",{className:Oe("absolute inset-0 rounded-full",d>60?"bg-primary":d>40?"bg-amber-500":"bg-error"),style:{width:`${d}%`}})})]}),x.jsx("div",{className:"basis-50",children:x.jsx(Yt,{color:l?"primary":"light",className:Oe("gap-2 w-full",l&&"relative before:absolute before:-inset-1 before:border before:border-primary/40 before:rounded-[90px] before:animate-wave-2 after:absolute after:-inset-2 after:border after:border-primary/20 after:rounded-[90px] after:animate-wave"),text:t,icon:()=>x.jsx(ee,{name:`act-${t.toLowerCase()}`,className:"w-5 h-5"}),onClick:o,disabled:h||!p})})]}),x.jsxs(hn.Panel,{className:"bg-dark-500 border border-[#2A7D4E] rounded-[20px] shadow-lg focus:outline-none",children:[x.jsx(Cn.Arrow,{offset:8,className:"absolute rotate-45 border-8 border-[#2A7D4E]"}),x.jsxs("div",{className:"relative h-full py-6 pl-8 pr-16 bg-dark-500 rounded-[20px]",children:[x.jsx("h3",{className:"font-kanit font-semibold text-xl",children:s}),x.jsx("div",{className:"mt-2 text-light max-w-[300px]",children:x.jsx("p",{children:i})}),x.jsx("button",{className:"absolute top-4 right-4 text-white/80 hover:text-white transition-colors",onClick:f,children:x.jsx(ee,{name:"close",className:"w-4 h-4"})})]})]})]})})},Ns=()=>{const{account:e}=Gt(),{setIsPending:t}=ut(),{lesson:n}=Ie(),{tamagotchi:r}=Ue(),{setNotification:o,activeNotification:s,setActiveNotification:i}=Vr(),l=Cr(),a=!!(n&&(n==null?void 0:n.step)>1),u=m=>{s&&(o(v=>({...v,...Bn(m)})),i(void 0)),t(!1)},f=()=>t(!1),d=()=>{t(!0),l({Feed:null},{onSuccess:()=>u("FeedMe"),onError:f})},h=()=>{t(!0),l({Play:null},{onSuccess:()=>u("PlayWithMe"),onError:f})},p=()=>{t(!0),l({Sleep:null},{onSuccess:()=>u("WantToSleep"),onError:f})};return x.jsx(x.Fragment,{children:r&&x.jsxs("div",{className:Oe("flex gap-12 items-center p-4 bg-white/5 rounded-2xl",a&&"w-full pr-12"),children:[x.jsxs("div",{className:"basis-[415px] w-full px-8 py-6 bg-[#1E1E1E] rounded-2xl",children:[x.jsxs("div",{className:"flex justify-between gap-4",children:[x.jsx("h2",{className:"typo-h2 text-primary truncate max-w-[9ch]",children:r.name?r.name:"Geary"}),x.jsx("div",{children:x.jsx(xi,{})})]}),x.jsx("div",{className:"mt-8 text-white text-lg font-medium",children:x.jsx("table",{className:"block w-full text-left",children:x.jsxs("tbody",{className:"block space-y-8",children:[r.owner&&x.jsxs("tr",{className:"flex gap-8",children:[x.jsx("th",{className:"flex-1 w-40 text-white text-opacity-70 font-medium",children:"Owner ID:"}),x.jsx("td",{className:"flex-1 w-40 truncate",children:r.owner===(e==null?void 0:e.decodedAddress)?e==null?void 0:e.meta.name:r.owner})]}),r.dateOfBirth&&x.jsxs("tr",{className:"flex gap-8",children:[x.jsx("th",{className:"flex-1 w-40 text-white text-opacity-70 font-medium",children:"Age:"}),x.jsx("td",{className:"flex-1 w-40",children:Br(r.dateOfBirth)})]})]})})})]}),a&&x.jsxs("div",{className:"basis-[620px] w-full space-y-6 grow",children:[x.jsx(It,{label:"Hungry",value:+le(r.fed),icon:"feed",labelBtn:"Feed",onClick:d,tooltipText:'Your character has a low fed score. In order to increase the level, please click on the "Feed" button',tooltipTitle:"Low level of fed",isActive:s==="FeedMe"}),x.jsx(It,{label:"Happy",value:+le(r.entertained),icon:"happy",labelBtn:"Play",onClick:h,tooltipText:'Your character has a low happiness score. In order to increase the level, please click on the "Play" button',tooltipTitle:"Low level of happiness",isActive:s==="PlayWithMe"}),x.jsx(It,{label:"Tired",value:+le(r.rested),icon:"tired",labelBtn:"Sleep",onClick:p,tooltipText:'Your character has a low rest score. In order to increase the level, please click on the "Sleep" button',tooltipTitle:"Low level of rest",isActive:s==="WantToSleep"})]})]})})};var Is=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,o,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(o=r;o--!==0;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[o]))return!1;for(o=r;o--!==0;){var i=s[o];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n};const jn=Ut(Is);function Ht(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}var Ms=Object.defineProperty,Fn=Object.getOwnPropertySymbols,As=Object.prototype.hasOwnProperty,Ds=Object.prototype.propertyIsEnumerable,Nn=(e,t,n)=>t in e?Ms(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ks=(e,t)=>{for(var n in t||(t={}))As.call(t,n)&&Nn(e,n,t[n]);if(Fn)for(var n of Fn(t))Ds.call(t,n)&&Nn(e,n,t[n]);return e};function In(e,t){if(t===null||typeof t!="object")return{};const n=ks({},t);return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}const Ls="__MANTINE_FORM_INDEX__";function Mn(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Ls}`)):!1:!1}function ve(e){if(typeof e!="object")return e;var t,n,r=Object.prototype.toString.call(e);if(r==="[object Object]"){if(e.constructor!==Object&&typeof e.constructor=="function"){n=new e.constructor;for(t in e)e.hasOwnProperty(t)&&n[t]!==e[t]&&(n[t]=ve(e[t]))}else{n={};for(t in e)t==="__proto__"?Object.defineProperty(n,t,{value:ve(e[t]),configurable:!0,enumerable:!0,writable:!0}):n[t]=ve(e[t])}return n}if(r==="[object Array]"){for(t=e.length,n=Array(t);t--;)n[t]=ve(e[t]);return n}return r==="[object Set]"?(n=new Set,e.forEach(function(o){n.add(ve(o))}),n):r==="[object Map]"?(n=new Map,e.forEach(function(o,s){n.set(ve(s),ve(o))}),n):r==="[object Date]"?new Date(+e):r==="[object RegExp]"?(n=new RegExp(e.source,e.flags),n.lastIndex=e.lastIndex,n):r==="[object DataView]"?new e.constructor(ve(e.buffer)):r==="[object ArrayBuffer]"?e.slice(0):r.slice(-6)==="Array]"?new e.constructor(e):e}function Or(e){return typeof e!="string"?[]:e.split(".")}function $t(e,t,n){const r=Or(e);if(r.length===0)return n;const o=ve(n);if(r.length===1)return o[r[0]]=t,o;let s=o[r[0]];for(let i=1;i<r.length-1;i+=1){if(s===void 0)return o;s=s[r[i]]}return s[r[r.length-1]]=t,o}function $e(e,t){const n=Or(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let o=1;o<n.length&&r!==void 0;o+=1)r=r[n[o]];return r}function An(e){const t=Ht(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function Wt(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((o,s)=>{const i=e[s],l=`${n===""?"":`${n}.`}${s}`,a=$e(l,t);let u=!1;return typeof i=="function"&&(o[l]=i(a,t,l)),typeof i=="object"&&Array.isArray(a)&&(u=!0,a.forEach((f,d)=>Wt(i,t,`${l}.${d}`,o))),typeof i=="object"&&typeof a=="object"&&a!==null&&(u||Wt(i,t,l,o)),o},r)}function Vt(e,t){return An(typeof e=="function"?e(t):Wt(e,t))}function et(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=Vt(t,n),o=Object.keys(r.errors).find(s=>e.split(".").every((i,l)=>i===s.split(".")[l]));return{hasError:!!o,error:o?r.errors[o]:null}}function _s(e,{from:t,to:n},r){const o=$e(e,r);if(!Array.isArray(o))return r;const s=[...o],i=o[t];return s.splice(t,1),s.splice(n,0,i),$t(e,s,r)}function Bs(e,t,n){const r=$e(e,n);return Array.isArray(r)?$t(e,r.filter((o,s)=>s!==t),n):n}function Hs(e,t,n,r){const o=$e(e,r);if(!Array.isArray(o))return r;const s=[...o];return s.splice(typeof n=="number"?n:s.length,0,t),$t(e,s,r)}function Dn(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(o=>o.includes(`${t}.`));return e[t]||r.some(o=>e[o])||!1}return n.some(r=>e[r])}function Ws(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}var Vs=Object.defineProperty,Us=Object.defineProperties,Ys=Object.getOwnPropertyDescriptors,kn=Object.getOwnPropertySymbols,Gs=Object.prototype.hasOwnProperty,qs=Object.prototype.propertyIsEnumerable,Ln=(e,t,n)=>t in e?Vs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ae=(e,t)=>{for(var n in t||(t={}))Gs.call(t,n)&&Ln(e,n,t[n]);if(kn)for(var n of kn(t))qs.call(t,n)&&Ln(e,n,t[n]);return e},Mt=(e,t)=>Us(e,Ys(t));function zs({initialValues:e={},initialErrors:t={},initialDirty:n={},initialTouched:r={},clearInputErrorOnChange:o=!0,validateInputOnChange:s=!1,validateInputOnBlur:i=!1,transformValues:l=u=>u,validate:a}={}){const[u,f]=c.useState(r),[d,h]=c.useState(n),[p,m]=c.useState(e),[v,y]=c.useState(Ht(t)),b=c.useRef(e),g=C=>{b.current=C},T=c.useCallback(()=>f({}),[]),R=C=>{g(C||p),h({})},P=c.useCallback(C=>y(_=>Ht(typeof C=="function"?C(_):C)),[]),A=c.useCallback(()=>y({}),[]),M=c.useCallback(()=>{m(e),A(),R(e),T()},[]),D=c.useCallback((C,_)=>P(W=>Mt(Ae({},W),{[C]:_})),[]),j=c.useCallback(C=>P(_=>{if(typeof C!="string")return _;const W=Ae({},_);return delete W[C],W}),[]),$=c.useCallback(C=>h(_=>{if(typeof C!="string")return _;const W=In(C,_);return delete W[C],W}),[]),F=c.useCallback((C,_)=>{const W=Mn(C,s);$(C),f(Z=>Mt(Ae({},Z),{[C]:!0})),m(Z=>{const fe=$t(C,_,Z);if(W){const q=et(C,a,fe);q.hasError?D(C,q.error):j(C)}return fe}),!W&&o&&D(C,null)},[]),N=c.useCallback(C=>{m(_=>{const W=typeof C=="function"?C(_):C;return Ae(Ae({},_),W)}),o&&A()},[]),S=c.useCallback((C,_)=>{$(C),m(W=>_s(C,_,W))},[]),E=c.useCallback((C,_)=>{$(C),m(W=>Bs(C,_,W)),y(W=>In(C,W))},[]),w=c.useCallback((C,_,W)=>{$(C),m(Z=>Hs(C,_,W,Z))},[]),I=c.useCallback(()=>{const C=Vt(a,p);return y(C.errors),C},[p,a]),O=c.useCallback(C=>{const _=et(C,a,p);return _.hasError?D(C,_.error):j(C),_},[p,a]),k=(C,{type:_="input",withError:W=_==="input",withFocus:Z=!0}={})=>{const q={onChange:Ws(J=>F(C,J))};return W&&(q.error=v[C]),_==="checkbox"?q.checked=$e(C,p):q.value=$e(C,p),Z&&(q.onFocus=()=>f(J=>Mt(Ae({},J),{[C]:!0})),q.onBlur=()=>{if(Mn(C,i)){const J=et(C,a,p);J.hasError?D(C,J.error):j(C)}}),q},L=(C,_)=>W=>{W==null||W.preventDefault();const Z=I();Z.hasErrors?_==null||_(Z.errors,p,W):C(l(p),W)},B=c.useCallback(C=>{C.preventDefault(),M()},[]),H=C=>{if(Object.keys(d).length>0)return Dn(d,C);if(C){const W=$e(C,p),Z=$e(C,b.current);return!jn(W,Z)}return!jn(p,b.current)},G=c.useCallback(C=>Dn(u,C),[u]),Q=c.useCallback(C=>C?!et(C,a,p).hasError:!Vt(a,p).hasErrors,[p,a]);return{values:p,errors:v,setValues:N,setErrors:P,setFieldValue:F,setFieldError:D,clearFieldError:j,clearErrors:A,reset:M,validate:I,validateField:O,reorderListItem:S,removeListItem:E,insertListItem:w,getInputProps:k,onSubmit:L,onReset:B,isDirty:H,isTouched:G,setTouched:f,setDirty:h,resetTouched:T,resetDirty:R,isValid:Q}}const Xs=e=>e?jr(e)?null:"String must be in Hex format":"Field is required",Ks={programId:Xs},Qs=()=>{const{isPending:e}=ut(),{setLesson:t}=Ie(),n=zs({initialValues:Mr,validate:Ks,validateInputOnChange:!0}),{getInputProps:r,errors:o}=n,s=n.onSubmit(i=>{t({step:5,programId:i.programId})});return x.jsx("form",{onSubmit:s,className:"flex items-start justify-center gap-6",children:+n.values.currentStep==6?x.jsx(Fr,{to:"/battle",className:Oe("btn gap-2 whitespace-nowrap",Nr.primary),children:"Let's Battle!"}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"basis-[400px]",children:x.jsx(Ir,{placeholder:"Insert program ID",direction:"y",...r("programId")})}),x.jsx("div",{className:"whitespace-nowrap",children:x.jsx(Yt,{text:"Create Tamagochi",color:"primary",type:"submit",disabled:Object.keys(o).length>0||e})})]})})},Zs=()=>{const{accounts:e}=Gt(),[t,n]=c.useState(!1),r=()=>n(!0),o=()=>n(!1);return x.jsxs(x.Fragment,{children:[x.jsx(Yt,{text:"Connect account",color:"primary",onClick:r}),t&&x.jsx(Ar,{accounts:e,close:o})]})},Js=()=>{const{account:e}=Gt();return x.jsxs("div",{className:"flex flex-col items-center gap-9 text-center w-full",children:[x.jsx("div",{className:"space-y-6",children:e?x.jsxs(x.Fragment,{children:[x.jsx("h2",{className:"typo-h2 text-primary",children:"Geary"}),x.jsx("p",{className:"text-[#D1D1D1]",children:"Insert program ID to create a character"})]}):x.jsxs("h2",{className:"typo-h2 text-center",children:[x.jsx("span",{className:"block text-primary",children:"Connect your account"})," to start the game"]})}),x.jsx("div",{className:" w-full",children:e?x.jsx(Qs,{}):x.jsx(Zs,{})})]})},el=()=>{const{tamagotchi:e}=Ue(),{lesson:t,isReady:n}=Ie();return x.jsxs("section",{className:"grid grid-rows-[1fr_auto_auto] h-[calc(100vh-216px)]",children:[x.jsx("div",{className:"grow flex flex-col justify-center text-center",children:t?e&&(n?x.jsx(Wr,{}):x.jsx(Dr,{})):x.jsx("img",{className:"grow w-full h-30 aspect-[45/56]",src:"/images/avatar.svg",width:448,height:560,alt:"Img",loading:"lazy"})}),x.jsx("div",{className:"mt-12 flex flex-col items-center gap-9",children:t?n&&x.jsx(Ns,{}):x.jsx(Js,{})})]})};function rl(){return x.jsx(el,{})}export{rl as default};
